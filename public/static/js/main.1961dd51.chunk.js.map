{"version":3,"sources":["theme/index.ts","services/loading-state-service.ts","utils/request.ts","services/article-data-service.ts","services/article-type-data-service.ts","services/file-upload-service.ts","services/action-service.ts","services/login-service.tsx","services/portal-message-service.ts","services/user-service.ts","components/portal/index.tsx","layout/app-bar.tsx","layout/menu.tsx","layout/auth-layout.tsx","layout/public-layout.tsx","components/table/quick-filter-toolbar.tsx","components/dialog/confirm-delete-dialog.tsx","pages/products/index.tsx","components/form/upload-adaptor-plugin.ts","pages/products/components/edit-form.tsx","components/form/action-menu.tsx","pages/products/detail/index.tsx","pages/applications/index.tsx","pages/applications/components/edit-form.tsx","pages/applications/detail/index.tsx","pages/news/index.tsx","pages/news/components/edit-form.tsx","pages/news/detail/index.tsx","pages/others/index.tsx","pages/others/components/edit-form.tsx","pages/others/detail/index.tsx","pages/settings/components/filter-toolbar.tsx","pages/settings/components/category-detail-dialog.tsx","pages/settings/index.tsx","pages/login/index.tsx","route/index.tsx","App.tsx","index.tsx"],"names":["theme","createTheme","palette","primary","main","secondary","error","red","A400","loadingSubject","BehaviorSubject","loading","this","next","asObservable","axiosInstance","axios","create","timeout","headers","withCredentials","request","url","method","config","of","pipe","tap","LoadingStateService","setLoading","mergeMap","Object","assign","map","resp","data","catchError","throwError","finalize","postFormData","post","getList","params","getDetail","id","creat","edit","delete","publish","withdraw","category","postImage","form","postVideo","actionSubject","save","handleAction","action","filter","x","signIn","email","password","code","signOut","_portalMessageSubject","message","type","body","getUserInfo","Portal","children","channel","useEffect","PortalMessageService","CHANNEL_APP_BAR_TITLE","StyleAppBar","styled","MuiAppBar","shouldForwardProp","prop","open","zIndex","drawer","transition","transitions","easing","sharp","duration","leavingScreen","marginLeft","enteringScreen","AppBar","toggleDrawer","useState","title","setTitle","titleSubscription","onMessage","subscribe","newTitle","unsubscribe","position","Toolbar","sx","pr","IconButton","edge","color","onClick","marginRight","Typography","component","variant","noWrap","flexGrow","openedMixin","width","marginTop","overflowX","DrawerHeader","display","alignItems","justifyContent","padding","spacing","mixins","toolbar","Drawer","MuiDrawer","flexShrink","whiteSpace","boxSizing","breakpoints","up","closedMixin","AppMenu","Divider","List","to","ListItem","ListItemIcon","ListItemText","AuthLayout","openDrawer","setOpenDrawer","Box","height","overflow","flexDirection","Container","maxWidth","Paper","mt","mb","PublicLayout","props","InlineSearchBox","flexWrap","down","borderBottom","divider","filterSubject","Subject","QuickFilterToolbar","inputRef","useRef","filterSubscription","debounceTime","value","setFilter","kw","offset","TextField","defaultValue","onChange","e","target","placeholder","InputProps","startAdornment","fontSize","endAdornment","size","style","visibility","current","ConfirmDeleteDialog","onClose","onConfirm","Dialog","DialogTitle","DialogContent","dividers","DialogContentText","DialogActions","Button","autoFocus","Products","limit","dataSource","setDataSource","totalSize","setTotalSize","deleteDialog","setDeleteDialog","history","useHistory","snackBar","useSnackbar","ArticleDataService","errcode","list","total","console","enqueueSnackbar","err","cols","field","headerName","sortable","renderCell","Link","href","row","item","p","autoHeight","disableColumnMenu","disableColumnFilter","pagination","pageSize","page","rowCount","rowsPerPageOptions","onPageChange","pageNumber","onPageSizeChange","components","componentsProps","columns","rows","Fab","bottom","right","push","MyUploadAdapter","loader","_uploadTask","upload","formData","FormData","file","then","append","lastValueFrom","FileUploadService","default","catch","abort","UploadAdaptorPlugin","editor","plugins","get","createUploadAdapter","EditForm","detail","formDetail","setFormDetail","categoryList","setCategoryList","selectedRootCategory","setSelectedRootCategory","ArticleTypeDataService","type_id","find","saveAction","ActionService","switchMap","content","summary","covers","img","updateInputValue","key","state","Grid","container","xs","select","minWidth","mr","label","targetCategory","parent_id","MenuItem","name","fullWidth","htmlFor","accept","files","length","Math","ceil","random","article_id","ImageList","minHeight","rowHeight","ImageListItem","src","srcSet","alt","extraPlugins","ClassicEditor","event","rawContent","getData","log","ActionMenu","status","isCreate","anchorEl","setAnchorEl","closeMenu","handleSave","undefined","disableElevation","currentTarget","endIcon","anchorOrigin","vertical","horizontal","transformOrigin","MenuListProps","PaperProps","ProductDetail","read_cnt","created_at","updated_at","setDetail","useRouteMatch","actionSubscription","parseInt","info","pl","goBack","Applications","ApplicationDetail","News","NewsDetail","Others","SelectProps","readOnly","OtherDetail","FilterToolbar","handleKWChange","m","entries","CategoryDetailDialog","typeList","onSave","typeDetail","required","margin","Settings","detailDialog","setDetailDialog","typeListSubscription","closeDetailDialog","saveItem","createItem","newForm","result","includes","step","i","filterData","Login","Date","valueOf","codeState","setCodeState","loginForm","setLoginForm","errorForm","setErrorForm","snakeBar","updatedFormValue","codeUrl","useMemo","Avatar","bgcolor","onSubmit","preventDefault","LoginService","errmessage","newState","noValidate","autoComplete","helperText","RouterConfig","auth","setAuth","useInfoSubscription","UserService","overflowY","path","exact","App","ThemeProvider","CssBaseline","maxSnack","ReactDOM","render","StrictMode","document","getElementById","token","querySelector","defaults","common","loadCSRFToken"],"mappings":"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","file":"static/js/main.1961dd51.chunk.js","sourcesContent":["import {red} from '@mui/material/colors';\nimport {createTheme} from '@mui/material/styles';\n\n// A custom theme for this app\nconst theme = createTheme({\n    palette: {\n        primary: {\n            main: '#556cd6',\n        },\n        secondary: {\n            main: '#19857b',\n        },\n        error: {\n            main: red.A400,\n        },\n    },\n});\n\nexport default theme;","import { BehaviorSubject, Observable } from 'rxjs'\n\nclass LoadingStateService {\n    loadingSubject = new BehaviorSubject(false)\n\n    setLoading(loading: boolean) {\n        this.loadingSubject.next(loading)\n    }\n\n    subscribe(): Observable<boolean> {\n        return this.loadingSubject.asObservable()\n    }\n}\n\nexport default new LoadingStateService()","import { catchError, mergeMap, of, throwError, tap, finalize, map } from \"rxjs\";\nimport axios, { AxiosRequestConfig, Method } from \"axios\";\nimport { LoadingStateService } from \"../services\";\n\nconst defaultRequestConfig = {\n  \"Content-Type\": \"application/json; charset=utf-8\",\n  \"X-Requested-With\": \"XMLHttpRequest\"\n};\n\n\nconst axiosInstance = axios.create({\n  timeout: 6000,\n  headers: defaultRequestConfig,\n  withCredentials: true\n});\n\nexport function loadCSRFToken(token) {\n  axiosInstance.defaults.headers.common[\"X-CSRF-TOKEN\"] = token;\n}\n\nexport const request = <T>(url: string, method: Method, config: AxiosRequestConfig = {}) => {\n  return of({}).pipe(\n    tap(() => LoadingStateService.setLoading(true)),\n    mergeMap(() =>\n      axiosInstance.request<T>(\n        Object.assign({}, config, {\n          url,\n          method\n        })\n      )\n    ),\n    map(resp => resp.data),\n    catchError((error) => {\n      return throwError(error);\n    }),\n    finalize(() => LoadingStateService.setLoading(false))\n  );\n};\n\nexport const postFormData = <T>(url: string, data: FormData, config: AxiosRequestConfig = {\n  headers: {\n    \"Content-Type\": \"multipart/form-data\"\n  }\n}) => {\n  return of({}).pipe(\n    tap(() => LoadingStateService.setLoading(true)),\n    mergeMap(() => axios.post<FormData, T>(url, data, config)),\n    map(resp => resp),\n    catchError((error) => {\n      return throwError(error);\n    }),\n    finalize(() => LoadingStateService.setLoading(false))\n  );\n};\n","import { request } from '../utils';\nimport {\n    ArticleCreateRequest,\n    ArticleDetailResponse,\n    ArticleEditRequest, ArticleFilter,\n    ArticleListResponse,\n} from '../models';\n\nclass ArticleDataService {\n    getList = (params: ArticleFilter) => {\n        return request<ArticleListResponse>(`/admin/article/list`, 'GET', {\n            params\n        });\n    };\n\n    getDetail = (id: number) => {\n        return request<ArticleDetailResponse>(`/admin/article/info`, 'GET', {\n            params: {\n                id,\n            },\n        });\n    };\n\n    creat = (data: ArticleCreateRequest) => {\n        return request<void>(`/admin/article/add`, 'POST', {\n            data,\n        });\n    };\n    edit = (data: ArticleEditRequest) => {\n        return request<void>(`/admin/article/edit`, 'POST', {\n            data,\n        });\n    };\n\n    delete = (id: number) => {\n        return request<void>(`/admin/article/del`, 'POST', {\n            data: {\n                id,\n            },\n        });\n    };\n\n    publish = (id: number) => {\n        return request<void>(`/admin/article/publish`, 'POST', {\n            params: {\n                id,\n            },\n        });\n    };\n    withdraw = (id: number) => {\n        return request<void>(`/admin/article/withdraw`, 'POST', {\n            params: {\n                id,\n            },\n        });\n    };\n}\n\nexport default new ArticleDataService();","import { request } from '../utils';\nimport { ArticleTypeCreateRequest, ArticleTypeEditRequest, ArticleTypeListResponse } from '../models';\n\nclass ArticleTypeDataService {\n    getList = (category: number) => {\n        return request<ArticleTypeListResponse>(`/admin/article/type/list`, 'GET', {\n            params: {\n                category,\n            },\n        });\n    };\n\n    creat = (data: ArticleTypeCreateRequest) => {\n        return request<void>(`/admin/article/type/add`, 'POST', {\n            data,\n        });\n    };\n    edit = (data: ArticleTypeEditRequest) => {\n        return request<void>(`/admin/article/type/edit`, 'POST', {\n            data,\n        });\n    };\n\n    delete = (id: number) => {\n        return request<void>(`/admin/article/type/del`, 'POST', {\n            data: {\n                id,\n            },\n        });\n    };\n}\n\nexport default new ArticleTypeDataService();","import { postFormData } from '../utils';\nimport { FileUploadResponse } from '../models';\nimport { Observable } from 'rxjs';\n\nclass FileUploadService {\n    postImage: (form: FormData) => Observable<FileUploadResponse> = (form) => {\n        return postFormData<FileUploadResponse>(`/admin/upload/image`, form);\n    }\n\n    postVideo = (form) => {\n        return postFormData<FileUploadResponse>(`/admin/upload/video`, form);\n    }\n}\n\nexport default new FileUploadService();","import { BehaviorSubject, filter, Observable } from 'rxjs';\n\nclass ActionService {\n    private actionSubject = new BehaviorSubject<string>(null);\n\n    save = (): void => {\n        this.actionSubject.next('save');\n    };\n\n    publish = (): void => {\n        this.actionSubject.next('publish');\n    };\n    withdraw = (): void => {\n        this.actionSubject.next('withdraw');\n    };\n\n    handleAction = (action: string): Observable<string> => {\n        return this.actionSubject.pipe(filter(x => x === action));\n    };\n}\n\nexport default new ActionService();","import { request } from '../utils';\nimport { LoginResponse } from \"../models\";\n\nclass LoginService {\n    signIn = ({ email, password, code }) => {\n\n        return request<LoginResponse>(`/admin/login`, 'POST', {\n            data: {\n                email,\n                password,\n                code,\n            },\n        });\n    };\n    signOut = () => {\n        return request<void>(`/admin/sign`, 'GET');\n    };\n}\n\nexport default new LoginService();\n","import { BehaviorSubject, filter, map, Observable } from 'rxjs';\nimport { ReactElement, ReactNode } from 'react';\n\nclass PortalMessageService {\n    private _portalMessageSubject = new BehaviorSubject<{ type: string, body: ReactElement | ReactNode }>(null);\n\n    publish(message: { type: string, body: ReactElement | ReactNode }): void {\n        this._portalMessageSubject.next(message);\n    }\n\n    onMessage(type): Observable<ReactElement | ReactNode> {\n        return this._portalMessageSubject.pipe(filter(x => x?.type === type), map(x => x.body));\n    }\n}\n\nexport default new PortalMessageService();","import { request } from \"../utils\";\nimport { UserInfoResponse } from \"../models\";\n\nclass UserService {\n    getUserInfo = () => {\n        return request<UserInfoResponse>(`/admin/self/user/info`, \"GET\");\n    };\n}\n\nexport default new UserService();\n","import React, { useEffect } from 'react';\nimport { PortalMessageService } from '../../services';\n\nexport const Portal: React.FC<{ channel: string }> = ({ children, channel }) => {\n    useEffect(() => {\n        PortalMessageService.publish({\n            type: channel,\n            body: children,\n        });\n    }, [children, channel]);\n\n    return null;\n};\n\nexport const CHANNEL_APP_BAR_TITLE = 'appBarTitle';\n","import React, { useEffect, useState } from 'react';\nimport { IconButton, styled, Toolbar, Typography } from '@mui/material';\nimport MuiAppBar, { AppBarProps as MuiAppBarProps } from '@mui/material/AppBar';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport { PortalMessageService } from '../services';\nimport { CHANNEL_APP_BAR_TITLE } from '../components/portal';\n\ninterface AppBarProps extends MuiAppBarProps {\n    open?: boolean;\n}\n\nconst StyleAppBar = styled(MuiAppBar, {\n    shouldForwardProp: (prop) => prop !== 'open',\n})<AppBarProps>(({ theme, open }) => ({\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n    }),\n    ...(open && {\n        marginLeft: '200px',\n        // width: `calc(100% - 240px)`,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    }),\n}));\n\nexport const AppBar: React.FC<{ open; toggleDrawer }> = ({ open, toggleDrawer }) => {\n    const [title, setTitle] = useState(null);\n\n    useEffect(() => {\n        const titleSubscription = PortalMessageService.onMessage(CHANNEL_APP_BAR_TITLE).subscribe((newTitle) => {\n            setTitle(newTitle);\n        });\n\n        return () => {\n            titleSubscription.unsubscribe();\n        };\n    }, []);\n\n    return (\n        <StyleAppBar position='absolute' open={open}>\n            <Toolbar\n                sx={{\n                    pr: '24px', // keep right padding when drawer closed\n                }}>\n                <IconButton\n                    edge='start'\n                    color='inherit'\n                    aria-label='open drawer'\n                    onClick={toggleDrawer}\n                    sx={{\n                        marginRight: '36px',\n                        // ...(open && { display: 'none' }),\n                    }}>\n                    <MenuIcon />\n                </IconButton>\n                <Typography component='h1' variant='h6' color='inherit' noWrap sx={{ flexGrow: 1 }}>\n                    {title}\n                </Typography>\n            </Toolbar>\n        </StyleAppBar>\n    );\n};\n","import React from \"react\";\nimport {\n    Divider,\n    List, ListItem, ListItemIcon,\n    ListItemText,\n    styled\n} from \"@mui/material\";\nimport MuiDrawer from \"@mui/material/Drawer\";\nimport WidgetsIcon from '@mui/icons-material/Widgets';\nimport TrendingUpIcon from '@mui/icons-material/TrendingUp';\nimport AnalyticsIcon from '@mui/icons-material/Analytics';\nimport ApiIcon from '@mui/icons-material/Api';\nimport SettingsIcon from \"@mui/icons-material/Settings\";\nimport { Link } from \"react-router-dom\";\n\nconst drawerWidth = 200;\n\nconst openedMixin = (theme) => ({\n    width: drawerWidth,\n    marginTop: '64px',\n    transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen\n    }),\n    overflowX: \"hidden\"\n});\n\nconst closedMixin = (theme) => ({\n    transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen\n    }),\n    marginTop: '64px',\n    overflowX: \"hidden\",\n    width: `calc(${theme.spacing(6)} + 1px)`,\n    [theme.breakpoints.up(\"sm\")]: {\n        width: `calc(${theme.spacing(7)} + 1px)`\n    }\n});\n\nexport const DrawerHeader = styled(\"div\")(({ theme }) => ({\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(-1, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar\n}));\n\nconst Drawer = styled(MuiDrawer)(\n  ({ theme, open }) => ({\n      width: drawerWidth,\n      flexShrink: 0,\n      whiteSpace: \"nowrap\",\n      boxSizing: \"border-box\",\n      ...(open && {\n          width: drawerWidth,\n          transition: theme.transitions.create(\"width\", {\n              easing: theme.transitions.easing.sharp,\n              duration: theme.transitions.duration.enteringScreen\n          }),\n          overflowX: \"hidden\",\n          \"& .MuiDrawer-paper\": openedMixin(theme)\n      }),\n      ...(!open && {\n          transition: theme.transitions.create(\"width\", {\n              easing: theme.transitions.easing.sharp,\n              duration: theme.transitions.duration.leavingScreen\n          }),\n          overflowX: \"hidden\",\n          width: `calc(${theme.spacing(7)} + 1px)`,\n          [theme.breakpoints.up(\"sm\")]: {\n              width: `calc(${theme.spacing(9)} + 1px)`\n          },\n          \"& .MuiDrawer-paper\": closedMixin(theme)\n      })\n  })\n);\n\nexport const AppMenu: React.FC<{ open; toggleDrawer }> = ({ open, toggleDrawer }) => {\n\n    return <Drawer variant=\"permanent\" open={open}>\n{/*\n        <DrawerHeader>\n            <IconButton onClick={toggleDrawer}>\n                <ChevronLeftIcon />\n            </IconButton>\n        </DrawerHeader>\n*/}\n        <Divider />\n        <List>\n            <div>\n                {/*<ListSubheader inset>稿件管理</ListSubheader>*/}\n                <Link to={\"/admin/products\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <WidgetsIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"产品中心\" />\n                    </ListItem>\n                </Link>\n\n\n                <Link to={\"/admin/applications\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <TrendingUpIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"行业应用\" />\n                    </ListItem>\n                </Link>\n\n                <Link to={\"/admin/news\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <AnalyticsIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"新闻中心\" />\n                    </ListItem>\n                </Link>\n\n                <Link to={\"/admin/others\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <ApiIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"其他\" />\n                    </ListItem>\n                </Link>\n            </div>\n        </List>\n        <Divider />\n        <List>\n            <div>\n\n                <Link to={\"/admin/settings\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <SettingsIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"稿件类型管理\" />\n                    </ListItem>\n                </Link>\n            </div>\n        </List>\n    </Drawer>;\n};","import React, { FC, Fragment, useState } from \"react\";\nimport { Box, Container, Paper } from \"@mui/material\";\n\nimport { AppBar } from \"./app-bar\";\nimport { AppMenu, DrawerHeader } from \"./menu\";\n\nexport const AuthLayout: FC = ({ children }) => {\n    const [openDrawer, setOpenDrawer] = useState(true);\n\n    const toggleDrawer = () => {\n        setOpenDrawer(!openDrawer);\n    };\n\n    return (\n      <Fragment>\n          <AppBar open={openDrawer} toggleDrawer={toggleDrawer} />\n          <AppMenu open={openDrawer} toggleDrawer={toggleDrawer} />\n          <Box\n            component=\"main\"\n            sx={{\n                flexGrow: 1,\n                height: \"100vh\",\n                overflow: \"auto\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                marginLeft: \"64px\",\n                transition: (theme) => theme.transitions.create(\"width\", {\n                    easing: theme.transitions.easing.sharp,\n                    duration: theme.transitions.duration.leavingScreen\n                }),\n                ...(openDrawer && {\n                    marginLeft: \"200px\",\n                    transition: (theme) => theme.transitions.create(\"width\", {\n                        easing: theme.transitions.easing.sharp,\n                        duration: theme.transitions.duration.enteringScreen\n                    })\n                })\n            }}>\n              <DrawerHeader />\n              <Container maxWidth=\"lg\">\n                  <Paper sx={{ mt: 4, mb: 4, height: \"100%\" }}>\n                      {children}\n                  </Paper>\n              </Container>\n          </Box>\n      </Fragment>\n    );\n};\n","import { Box } from '@mui/material';\nimport React from 'react';\n\nexport const PublicLayout: React.FC = (props) => {\n    return <Box\n        sx={{\n            // marginTop: 8,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n        }}\n    >\n        {props.children}\n    </Box>;\n};","import React, { useEffect, useRef } from 'react';\nimport { IconButton, InputProps, styled, TextField } from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport { FilterModel } from '../../models';\nimport { debounceTime, Subject, tap } from 'rxjs';\n\nconst InlineSearchBox = styled('div')(({ theme }) => ({\n    padding: theme.spacing(0.5, 0.5, 0),\n    justifyContent: 'space-between',\n    display: 'flex',\n    alignItems: 'flex-start',\n    flexWrap: 'wrap',\n    '& MuiTextField-root': {\n        [theme.breakpoints.down('xs')]: {\n            width: '100%',\n        },\n        margin: theme.spacing(1, 0.5, 1.5),\n        '& .MuiSvgIcon-root': {\n            marginRight: theme.spacing(0.5),\n        },\n        '& .MuiInput-underline:before': {\n            borderBottom: `1px solid ${theme.palette.divider}`,\n        },\n    },\n}));\n\nconst filterSubject = new Subject();\n\nexport const QuickFilterToolbar: React.FC<QuickFilterToolbarProps> = (props) => {\n        const inputRef = useRef(null);\n        const clearFilter = () => {\n            inputRef.current.value = '';\n            filterSubject.next('');\n        }\n        const onChange = (e) => {\n            filterSubject.next(e?.target.value);\n        }\n\n        useEffect(() => {\n            const filterSubscription = filterSubject.pipe(debounceTime(1500), tap((value) => {\n                props.setFilter((filter) => ({ ...filter, kw: value, offset: 0 }));\n            })).subscribe();\n\n            return () => {\n                filterSubscription.unsubscribe();\n            };\n        }, [props]);\n\n        return (\n            <InlineSearchBox>\n                <TextField\n                    inputRef={inputRef}\n                    variant='standard'\n                    defaultValue={props.value}\n                    onChange={onChange}\n                    placeholder='关键字查找'\n                    InputProps={{\n                        startAdornment: <SearchIcon fontSize='small' />,\n                        endAdornment: (\n                            <IconButton\n                                title='Clear'\n                                aria-label='Clear'\n                                size='small'\n                                style={{ visibility: props.value ? 'visible' : 'hidden' }}\n                                onClick={clearFilter}\n                            >\n                                <ClearIcon fontSize='small' />\n                            </IconButton>\n                        ),\n                    }}\n                />\n            </InlineSearchBox>\n        );\n    }\n;\n\ninterface QuickFilterToolbarProps extends InputProps {\n    setFilter: (filterState) => Partial<FilterModel>,\n};","import React from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\n\nexport interface ConfirmDeleteDialogProps {\n    open: boolean,\n    message?: string,\n    onClose?: () => void,\n    onConfirm?: () => void,\n}\n\nexport const ConfirmDeleteDialog: React.FC<ConfirmDeleteDialogProps> = ({ open, message, onClose, onConfirm }) => {\n\n    return <Dialog\n        maxWidth='xs'\n        open={open}\n    >\n        <DialogTitle>确认删除</DialogTitle>\n        <DialogContent dividers>\n            {message && <DialogContentText>\n                确认删除?\n            </DialogContentText>}\n        </DialogContent>\n        <DialogActions>\n            <Button autoFocus onClick={onClose}>\n                取消\n            </Button>\n            <Button color='warning' onClick={onConfirm}>确认</Button>\n        </DialogActions>\n    </Dialog>;\n\n};","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderCellParams, GridRowModel } from '@mui/x-data-grid';\n\nimport { ArticleDataService } from '../../services';\nimport { Article, ArticleFilter } from '../../models';\nimport { Box, Fab, IconButton, Link } from '@mui/material';\nimport { QuickFilterToolbar } from '../../components/table';\nimport AddIcon from '@mui/icons-material/Add';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useHistory } from 'react-router';\nimport { tap } from 'rxjs';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\nimport { useSnackbar } from 'notistack';\n\nexport const Products: React.FC = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 1 });\n    const [dataSource, setDataSource] = useState<Article[]>([]);\n    const [totalSize, setTotalSize] = useState<number>(1);\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({ open: false });\n\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleDataService.getList(filter).subscribe(({ errcode, data }) => {\n            if (errcode === 0) {\n                setDataSource(data.list);\n                setTotalSize(data.total);\n            } else {\n                console.error('fetch products error', errcode);\n                snackBar.enqueueSnackbar('获取产品列表失败', {\n                    variant: 'error',\n                });\n            }\n        }, (err) => {\n            console.error('fetch products error', err);\n            snackBar.enqueueSnackbar('获取产品列表失败', {\n                variant: 'error',\n            });\n        });\n    }, [filter, snackBar]);\n\n    function confirmDelete(item: GridRowModel) {\n        setDeleteDialog({\n            open: true, message: `确认删除产品信息: \"${item.title}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm: function(): void {\n                ArticleDataService.delete(item.id).pipe(\n                    tap(() => {\n                        setFilter({ ...filter });\n                        setDeleteDialog({ open: false });\n\n                        snackBar.enqueueSnackbar('删除产品成功', {\n                            variant: 'success',\n                        });\n                    }),\n                ).subscribe({\n                    error: (err) => {\n                        snackBar.enqueueSnackbar(' 删除产品失败', {\n                            variant: 'error',\n                        });\n                    },\n                });\n            },\n        });\n\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '稿件Id',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (<Link href={`/admin/products/detail/${params.value}`} color='primary'\n                >{params.value}</Link>);\n            },\n        },\n        {\n            field: 'title',\n            headerName: '标题',\n            sortable: false,\n        },\n        {\n            field: 'type_id',\n            headerName: '类型',\n            sortable: false,\n        },\n        {\n            field: 'status',\n            headerName: '状态',\n            sortable: false,\n        },\n        {\n            field: 'read_cnt',\n            headerName: '阅读次数',\n            sortable: false,\n        },\n        {\n            field: 'created_time',\n            headerName: '创建时间',\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <>\n                        <IconButton component={Link} href={`/admin/products/detail/${params.row.id}`}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => confirmDelete(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    function createItem() {\n        history.push('/admin/products/create');\n    }\n\n    return (\n        <Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={totalSize}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: QuickFilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        value: filter.kw,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={dataSource}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={createItem}\n            >\n                <AddIcon />\n            </Fab>\n            <ConfirmDeleteDialog {...deleteDialog} />\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>\n                产品中心\n            </Portal>\n        </Box>\n    );\n};\n","import { FileUploadService } from '../../services';\nimport { lastValueFrom, Subscription } from 'rxjs';\n\nclass MyUploadAdapter {\n    private loader: any;\n    private _uploadTask: Subscription;\n\n    constructor(loader) {\n        this.loader = loader;\n    }\n\n    upload = () => {\n        const formData = new FormData();\n        return this.loader.file.then((file) => {\n            formData.append('file', file);\n            return lastValueFrom(FileUploadService.postImage(formData)).then((resp) => {\n                if (resp.errcode !== 0) {\n                    return { default: 'https://33333.cdn.cke-cs.com/rc1DFuFpHqcR3Mah6y0e/images/a941c59ff780060b51d398434c99fe9f229615b4227f5434.png' };\n                }\n                return { default: resp.data.url };\n            }).catch(() => {\n                return { default: 'https://33333.cdn.cke-cs.com/rc1DFuFpHqcR3Mah6y0e/images/a941c59ff780060b51d398434c99fe9f229615b4227f5434.png' };\n            });\n        });\n    };\n\n    abort = () => {\n        this._uploadTask.unsubscribe();\n    };\n}\n\nexport function UploadAdaptorPlugin(editor) {\n    editor.plugins.get('FileRepository').createUploadAdapter = (loader) => {\n        return new MyUploadAdapter(loader);\n    };\n};","import React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n    Box,\n    Button,\n    Grid,\n    Paper,\n    TextField,\n    Typography,\n    ImageList,\n    ImageListItem,\n    MenuItem,\n} from '@mui/material';\nimport { Article, ArticleType, ArticleTypeListResponse } from '../../../models';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { ActionService, ArticleDataService, ArticleTypeDataService, FileUploadService } from '../../../services';\nimport { UploadAdaptorPlugin } from '../../../components/form/upload-adaptor-plugin';\nimport { switchMap } from 'rxjs';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\n\nexport const EditForm: React.FC<{ detail: Article }> = ({\n                                                            detail,\n                                                        }) => {\n    const [formDetail, setFormDetail] = useState<Article>(detail);\n    const [categoryList, setCategoryList] = useState<ArticleType[]>([]);\n    const [selectedRootCategory, setSelectedRootCategory] = useState<ArticleType>(null);\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleTypeDataService.getList(0).subscribe({\n            next: (resp: ArticleTypeListResponse) => {\n                const categoryList = resp.data.list;\n                setCategoryList(categoryList);\n            }, error: (err) => {\n                console.error('fail to fetch article type list', err);\n                snackBar.enqueueSnackbar('获取产品类型信息失败', {\n                    variant: 'error',\n                });\n            },\n        });\n    }, [snackBar]);\n    useEffect(() => {\n        if (formDetail.type_id >= 0) {\n            const selectedRootCategory = categoryList.find(x => x.id === formDetail.type_id);\n            setSelectedRootCategory(selectedRootCategory);\n        }\n    }, [categoryList, formDetail.type_id]);\n\n    useEffect(() => {\n        const saveAction = ActionService.handleAction('save').pipe(switchMap(() => {\n            return !formDetail.id ? ArticleDataService.creat({\n                category: 1,\n                content: formDetail.content,\n                summary: formDetail.summary,\n                title: formDetail.title,\n                type_id: formDetail.type_id,\n                covers: formDetail.covers.map(x => x.img),\n            }) : ArticleDataService.edit({\n                content: formDetail.content,\n                id: formDetail.id,\n                summary: formDetail.summary,\n                title: formDetail.title,\n                type_id: formDetail.type_id,\n                covers: formDetail.covers.map(x => x.img),\n            });\n        })).subscribe({\n            next: () => {\n                history.push('/admin/products');\n                snackBar.enqueueSnackbar('保存产品信息成功', {\n                    variant: 'success',\n                });\n            }, error: () => {\n                snackBar.enqueueSnackbar('保存产品失败', {\n                    variant: 'error',\n                });\n            },\n        });\n\n        return () => {\n            saveAction.unsubscribe();\n        };\n    }, [formDetail, snackBar, history]);\n\n    const rootCategoryList: () => ArticleType[] = () => {\n        return categoryList.filter(x => !x.parent_id);\n    };\n    const childCategoryList: () => ArticleType[] = () => {\n        return !selectedRootCategory ? [] : categoryList.filter(x => x.parent_id === selectedRootCategory.id);\n    };\n\n    function updateInputValue(key: string): (e: ChangeEvent<HTMLInputElement>) => void {\n        return (e) => {\n            const value = e.target.value;\n            setFormDetail((state) => ({\n                ...state,\n                [key]: value,\n            }));\n        };\n    }\n\n    function handleRootCategoryChange(e) {\n        const targetCategory = categoryList.find(x => x.id === e.target.value);\n        setSelectedRootCategory(targetCategory);\n    }\n\n    function handleChildCategoryChange(e) {\n        const targetCategory = categoryList.find(x => x.id === e.target.value);\n        setFormDetail((state) => ({\n            ...state,\n            type: [\n                selectedRootCategory,\n                targetCategory,\n            ],\n            type_id: targetCategory.id,\n        }));\n    }\n\n    function handleCoverUpload(e) {\n        const files = e.target.files;\n        if (files && files.length > 0) {\n            const formData = new FormData();\n            formData.append('file', files[0]);\n\n            FileUploadService.postImage(formData).subscribe({\n                next: (resp) => {\n                    setFormDetail((state) => {\n                        const covers = state.covers ?? [];\n                        covers.push({\n                            id: -Math.ceil(Math.random() * 1000),\n                            article_id: formDetail.id,\n                            img: resp.data.url,\n                        });\n\n                        return {\n                            ...state,\n                            covers,\n                        };\n                    });\n                }, error: (err) => {\n                    console.error('fail to upload image', err);\n                    snackBar.enqueueSnackbar(' 上传封面失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n        }\n    }\n\n    function handleContentUpdate(event, editor): void {\n        const rawContent = editor.getData();\n\n        setFormDetail((state) => ({\n            ...state,\n            content: rawContent,\n        }));\n        console.log('editor update >>>', rawContent);\n    }\n\n    function clearSelectedFile(e) {\n        e.target.value = null;\n    }\n\n    return <Box sx={{ '& .MuiTextField-root': { mt: 1, mb: 1 } }} component='form'>\n        <Grid container>\n            <Grid item xs={12}>\n                <TextField\n                    select\n                    sx={{ minWidth: '200px', mr: 1 }}\n                    id='product-category-root'\n                    label='产品类型'\n                    value={selectedRootCategory?.id}\n                    onChange={handleRootCategoryChange}\n                >\n                    {\n                        rootCategoryList().map(x => {\n                            return <MenuItem key={x.id} value={x.id}>\n                                {x.name}\n                            </MenuItem>;\n                        })\n                    }\n                </TextField>\n                <TextField\n                    select\n                    sx={{ minWidth: '200px' }}\n                    id='product-category-child'\n                    onChange={handleChildCategoryChange}\n                    value={formDetail.type_id > 0 ? formDetail.type_id : ''}\n                    label='子类型'>\n                    {\n                        childCategoryList().map(x => {\n                            return <MenuItem key={x.id} value={x.id}>\n                                {x.name}\n                            </MenuItem>;\n                        })\n                    }\n                </TextField>\n            </Grid>\n            <Grid item xs={12}>\n                <TextField fullWidth label='标题' defaultValue={formDetail.title} onChange={updateInputValue('title')} />\n            </Grid>\n            <Grid item xs={12}>\n                <TextField fullWidth label='摘要' rows='4' defaultValue={formDetail.summary}\n                           onChange={updateInputValue('summary')} />\n            </Grid>\n            <Grid item xs={12}>\n                <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                    <Grid container>\n                        <Grid item xs={1}>\n                            <Typography variant='subtitle1'>封面</Typography>\n                        </Grid>\n                        <Grid item container xs justifyContent='flex-end'>\n                            <label htmlFor='upload-cover'>\n                                <input style={{ display: 'none' }} accept='image/*' id='upload-cover' type='file'\n                                       onChange={handleCoverUpload} onClick={clearSelectedFile} />\n                                <Button variant='contained' component='span'>\n                                    添加封面\n                                </Button>\n                            </label>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <ImageList sx={{ minHeight: '160px', width: '100%' }} cols={5} rowHeight={164}>\n                                {formDetail.covers?.map((item) => (\n                                    <ImageListItem key={item.id}>\n                                        <img\n                                            src={`${item.img}`}\n                                            srcSet={`${item.img}`}\n                                            loading='lazy'\n                                            alt={''}\n                                        />\n                                    </ImageListItem>\n                                )) ?? <div />}\n                            </ImageList>\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n            <Grid item container xs={12}>\n                <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                    <Grid container>\n                        <Grid item xs={1}>\n                            <Typography variant='subtitle1'>内容</Typography>\n                        </Grid>\n                        <Grid item\n                              sx={{\n                                  height: '420px',\n                                  '& .ck-editor__main, & .ck-content': { height: '380px' },\n                              }}\n                              xs={12}>\n                            <CKEditor\n                                config={{\n                                    extraPlugins: [UploadAdaptorPlugin],\n                                }}\n                                editor={ClassicEditor}\n                                data={formDetail.content}\n                                onChange={handleContentUpdate}\n                            />\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n        </Grid>\n    </Box>;\n};","import React, { useState } from 'react';\nimport { Button } from '@mui/material';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport { ActionService } from '../../services';\n\nexport const ActionMenu: React.FC<{ status: number, isCreate: boolean }> = ({ status, isCreate }) => {\n    const [anchorEl, setAnchorEl] = useState(null);\n\n    function handleOpen(e) {\n        setAnchorEl(e.currentTarget);\n    }\n\n    function closeMenu() {\n        setAnchorEl(null);\n    }\n\n    function handleSave() {\n        ActionService.save();\n        closeMenu();\n    }\n\n    function handlePublish() {\n        ActionService.publish();\n        closeMenu();\n    }\n\n    function handleWithdraw() {\n        ActionService.withdraw();\n        closeMenu();\n    }\n\n    return <div>\n        <Button\n            id='action-button'\n            aria-controls='action-menu'\n            aria-haspopup='true'\n            aria-expanded={anchorEl ? 'true' : undefined}\n            variant='contained'\n            color={!status ? 'info' : 'success'}\n            disableElevation\n            onClick={handleOpen}\n            endIcon={<KeyboardArrowDownIcon />}\n        >\n            {status === 0 ? '草稿' : '已发布'}\n        </Button>\n        <Menu\n            id='action-menu'\n            open={!!anchorEl}\n            anchorEl={anchorEl}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }} MenuListProps={{\n            'aria-labelledby': 'long-button',\n        }}\n            onClose={closeMenu}\n            PaperProps={{\n                style: {\n                    width: '160px',\n                },\n            }}\n        >\n            {\n                isCreate ?\n                    <MenuItem key='edit' onClick={handleSave}>\n                        保存\n                    </MenuItem>\n                    : (\n                        <>\n                            <MenuItem key='edit' onClick={handleSave}>\n                                保存\n                            </MenuItem>\n                            <MenuItem key='publish' onClick={handlePublish}>\n                                发布\n                            </MenuItem>\n                            <MenuItem key='withdraw' onClick={handleWithdraw}>\n                                撤稿\n                            </MenuItem>\n                        </>\n                    )\n            }\n        </Menu>\n    </div>;\n};\n","import React, { useEffect, useState } from 'react';\nimport { Article } from '../../../models';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { ActionService, ArticleDataService } from '../../../services';\nimport { Button, Grid } from '@mui/material';\n\nimport { EditForm } from '../components/edit-form';\nimport { ActionMenu } from '../../../components/form/action-menu';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../../components/portal';\nimport { useSnackbar } from 'notistack';\nimport { switchMap } from 'rxjs';\n\nexport const ProductDetail: React.FC = (props) => {\n    const [detail, setDetail] = useState<Article>(\n        {\n            id: 0,\n            category: 1,\n            content: '',\n            covers: [],\n            read_cnt: 0,\n            status: 0,\n            summary: '',\n            title: '',\n            type: [],\n            type_id: -1,\n            created_at: '',\n            updated_at: '',\n        },\n    );\n\n    const snackBar = useSnackbar();\n    const history = useHistory();\n    const { params } = useRouteMatch<{ id: string }>();\n    const { id } = params;\n\n    useEffect(() => {\n        let actionSubscription = id ? [\n            ArticleDataService.getDetail(parseInt(id)).subscribe({\n                next: (resp) => setDetail(resp.data.info), error: (err) => {\n                    console.error('fail to fetch product detail', err);\n                    snackBar.enqueueSnackbar(' 获取产品信息失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n            ActionService.handleAction('withdraw').pipe(\n                switchMap(() => ArticleDataService.withdraw(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/products');\n                    snackBar.enqueueSnackbar(' 撤稿成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 撤稿失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n            ActionService.handleAction('publish').pipe(\n                switchMap(() => ArticleDataService.publish(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/products');\n                    snackBar.enqueueSnackbar(' 发布成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 发布失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n        ] : [];\n\n        return () => {\n            if (actionSubscription.length > 0) {\n                for (const subscription of actionSubscription) {\n                    subscription.unsubscribe();\n                }\n            }\n        };\n    }, [id, snackBar, history]);\n\n    function goBack() {\n        history.goBack();\n    }\n\n    return (<>\n        <Grid container spacing={2} sx={{ pr: 2, pl: 1 }}>\n            <Grid container item xs={12}>\n                <Grid item xs={1} sx={{ pl: 1 }}>\n                    <Button variant='outlined' onClick={goBack}>返回</Button>\n                </Grid>\n                <Grid item container justifyContent='flex-end' xs>\n                    <ActionMenu status={detail?.status} isCreate={detail?.id === 0} />\n                </Grid>\n            </Grid>\n            <Grid item xs={12}>\n                <EditForm detail={detail} />\n            </Grid>\n        </Grid>\n        <Portal channel={CHANNEL_APP_BAR_TITLE}>\n            产品中心\n        </Portal>\n    </>);\n};","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderCellParams, GridRowModel } from '@mui/x-data-grid';\nimport { useHistory } from 'react-router';\n\nimport { ArticleDataService } from '../../services';\nimport { Article, ArticleFilter } from '../../models';\nimport { Box, Fab, IconButton, Link } from '@mui/material';\nimport { QuickFilterToolbar } from '../../components/table';\nimport AddIcon from '@mui/icons-material/Add';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { tap } from 'rxjs';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\nimport { useSnackbar } from 'notistack';\n\nexport const Applications = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 2 });\n    const [dataSource, setDataSource] = useState<Article[]>([]);\n    const [totalSize, setTotalSize] = useState<number>(0);\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({ open: false });\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleDataService.getList(filter).subscribe({\n            next: ({ errcode, data }) => {\n                if (errcode === 0) {\n                    setDataSource(data.list);\n                    setTotalSize(data.total);\n                } else {\n                    console.error('fail to fetch application list', errcode);\n                    snackBar.enqueueSnackbar(' 获取行业应用列表失败', {\n                        variant: 'error',\n                    });\n                }\n            }, error: (err) => {\n                console.error('fail to fetch application list', err);\n                snackBar.enqueueSnackbar(' 获取行业应用列表失败', {\n                    variant: 'error',\n                });\n            },\n        });\n    }, [filter, snackBar]);\n\n    function confirmDelete(item: GridRowModel) {\n        setDeleteDialog({\n            open: true, message: `确认删除行业应用信息: \"${item.title}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm(): void {\n                ArticleDataService.delete(item.id).pipe(\n                    tap(() => {\n                        setFilter({ ...filter });\n                        setDeleteDialog({ open: false });\n\n                        snackBar.enqueueSnackbar(' 删除行业应用成功', {\n                            variant: 'success',\n                        });\n                    }),\n                ).subscribe({\n                    error: (err) => {\n                        console.error('fail to delete application', err);\n                        snackBar.enqueueSnackbar(' 删除行业应用失败', {\n                            variant: 'error',\n                        });\n                    },\n                });\n            },\n        });\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '稿件Id',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (<Link href={`/admin/applications/detail/${params.value}`} color='primary'\n                >{params.value}</Link>);\n            },\n        },\n        {\n            field: 'title',\n            headerName: '标题',\n            sortable: false,\n        },\n        {\n            field: 'type_id',\n            headerName: '类型',\n            sortable: false,\n        },\n        {\n            field: 'status',\n            headerName: '状态',\n            sortable: false,\n        },\n        {\n            field: 'read_cnt',\n            headerName: '阅读次数',\n            sortable: false,\n        },\n        {\n            field: 'created_time',\n            headerName: '创建时间',\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <>\n                        <IconButton component={Link} href={`/admin/applications/detail/${params.row.id}`}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => confirmDelete(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    function createItem() {\n        history.push('/admin/applications/create');\n    }\n\n    return (<Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={totalSize}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: QuickFilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        value: filter.kw,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={dataSource}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={createItem}\n            >\n                <AddIcon />\n            </Fab>\n            <ConfirmDeleteDialog {...deleteDialog} />\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>\n                行业应用\n            </Portal>\n        </Box>\n    );\n};","import React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n    Box,\n    Button,\n    Grid,\n    Paper,\n    TextField,\n    Typography,\n    ImageList,\n    ImageListItem,\n    MenuItem,\n} from '@mui/material';\nimport { Article, ArticleType, ArticleTypeListResponse } from '../../../models';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { ActionService, ArticleDataService, ArticleTypeDataService, FileUploadService } from '../../../services';\nimport { UploadAdaptorPlugin } from '../../../components/form/upload-adaptor-plugin';\nimport { switchMap } from 'rxjs';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\n\nexport const EditForm: React.FC<{ detail: Article }> = ({\n                                                            detail,\n                                                        }) => {\n    const [formDetail, setFormDetail] = useState<Article>(detail);\n    const [categoryList, setCategoryList] = useState<ArticleType[]>([]);\n\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleTypeDataService.getList(1).subscribe((resp: ArticleTypeListResponse) => {\n            const categoryList = resp.data.list;\n            setCategoryList(categoryList);\n        });\n    }, []);\n\n    useEffect(() => {\n        const saveAction = ActionService.handleAction('save').pipe(switchMap(() => {\n            return !formDetail.id ? ArticleDataService.creat({\n                category: 2,\n                content: formDetail.content,\n                summary: formDetail.summary,\n                title: formDetail.title,\n                type_id: formDetail.type_id,\n                covers: formDetail.covers.map(x => x.img),\n            }) : ArticleDataService.edit({\n                content: formDetail.content,\n                id: formDetail.id,\n                summary: formDetail.summary,\n                title: formDetail.title,\n                type_id: formDetail.type_id,\n                covers: formDetail.covers.map(x => x.img),\n            });\n        })).subscribe({\n            next: () => {\n                history.push('/admin/applications');\n\n                snackBar.enqueueSnackbar('  保存行业信息成功', {\n                    variant: 'success',\n                });\n            }, error: (err) => {\n                console.error('fail to fetch application list', err);\n                snackBar.enqueueSnackbar(' 保存行业信息失败', {\n                    variant: 'error',\n                });\n            },\n        });\n\n        return () => {\n            saveAction.unsubscribe();\n        };\n    }, [formDetail, snackBar, history]);\n\n    function updateInputValue(key: string): (e: ChangeEvent<HTMLInputElement>) => void {\n        return (e) => {\n            const value = e.target.value;\n            setFormDetail((state) => ({\n                ...state,\n                [key]: value,\n            }));\n        };\n    }\n\n    function handleCategoryChange(e) {\n        const targetCategory = categoryList.find(x => x.id === e.target.value);\n        setFormDetail((state) => ({\n            ...state,\n            type: [\n                targetCategory,\n            ],\n            type_id: targetCategory.id,\n        }));\n    }\n\n    function handleCoverUpload(e) {\n        const files = e.target.files;\n        if (files && files.length > 0) {\n            const formData = new FormData();\n            formData.append('file', files[0]);\n\n            FileUploadService.postImage(formData).subscribe((resp) => {\n                setFormDetail((state) => {\n                    const covers = state.covers ?? [];\n                    covers.push({\n                        id: -Math.ceil(Math.random() * 1000),\n                        article_id: formDetail.id,\n                        img: resp.data.url,\n                    });\n\n                    return {\n                        ...state,\n                        covers,\n                    };\n                });\n            });\n        }\n    }\n\n    function handleContentUpdate(event, editor): void {\n        const rawContent = editor.getData();\n\n        setFormDetail((state) => ({\n            ...state,\n            content: rawContent,\n        }));\n        console.log('editor update >>>', rawContent);\n    }\n\n    function clearSelectedFile(e) {\n        e.target.value = null;\n    }\n\n    return <Box sx={{ '& .MuiTextField-root': { mt: 1, mb: 1 } }} component='form'>\n        <Grid container>\n            <Grid item xs={12}>\n                <TextField\n                    select\n                    sx={{ minWidth: '200px' }}\n                    id='application-category'\n                    onChange={handleCategoryChange}\n                    value={formDetail.type_id > 0 ? formDetail.type_id : ''}\n                    label='应用类型'>\n                    {\n                        categoryList.map(x => {\n                            return <MenuItem key={x.id} value={x.id}>\n                                {x.name}\n                            </MenuItem>;\n                        })\n                    }\n                </TextField>\n            </Grid>\n            <Grid item xs={12}>\n                <TextField fullWidth label='标题' defaultValue={formDetail.title} onChange={updateInputValue('title')} />\n            </Grid>\n            <Grid item xs={12}>\n                <TextField fullWidth label='摘要' rows='4' defaultValue={formDetail.summary}\n                           onChange={updateInputValue('summary')} />\n            </Grid>\n            <Grid item xs={12}>\n                <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                    <Grid container>\n                        <Grid item xs={1}>\n                            <Typography variant='subtitle1'>封面</Typography>\n                        </Grid>\n                        <Grid item container xs justifyContent='flex-end'>\n                            <label htmlFor='upload-cover'>\n                                <input style={{ display: 'none' }} accept='image/*' id='upload-cover' type='file'\n                                       onChange={handleCoverUpload} onClick={clearSelectedFile} />\n                                <Button variant='contained' component='span'>\n                                    添加封面\n                                </Button>\n                            </label>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <ImageList sx={{ minHeight: '160px', width: '100%' }} cols={5} rowHeight={164}>\n                                {formDetail.covers?.map((item) => (\n                                    <ImageListItem key={item.id}>\n                                        <img\n                                            src={`${item.img}`}\n                                            srcSet={`${item.img}`}\n                                            loading='lazy'\n                                            alt={''}\n                                        />\n                                    </ImageListItem>\n                                )) ?? <div />}\n                            </ImageList>\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n            <Grid item container xs={12}>\n                <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                    <Grid container>\n                        <Grid item xs={1}>\n                            <Typography variant='subtitle1'>内容</Typography>\n                        </Grid>\n                        <Grid item\n                              sx={{\n                                  height: '420px',\n                                  '& .ck-editor__main, & .ck-content': { height: '380px' },\n                              }}\n                              xs={12}>\n                            <CKEditor\n                                config={{\n                                    extraPlugins: [UploadAdaptorPlugin],\n                                }}\n                                editor={ClassicEditor}\n                                data={formDetail.content}\n                                onChange={handleContentUpdate}\n                            />\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n        </Grid>\n    </Box>;\n};","import React, { useEffect, useState } from 'react';\nimport { Article } from '../../../models';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { ActionService, ArticleDataService } from '../../../services';\nimport { Button, Grid } from '@mui/material';\n\nimport { EditForm } from '../components/edit-form';\nimport { ActionMenu } from '../../../components/form/action-menu';\nimport { useSnackbar } from 'notistack';\nimport { switchMap } from 'rxjs';\n\nexport const ApplicationDetail: React.FC = (props) => {\n    const [detail, setDetail] = useState<Article>(\n        {\n            id: 0,\n            category: 2,\n            content: '',\n            covers: [],\n            read_cnt: 0,\n            status: 0,\n            summary: '',\n            title: '',\n            type: [],\n            type_id: -1,\n            created_at: '',\n            updated_at: '',\n        },\n    );\n\n    const snackBar = useSnackbar();\n    const history = useHistory();\n    const { params } = useRouteMatch<{ id: string }>();\n    const { id } = params;\n\n    useEffect(() => {\n        let actionSubscription = id ? [\n            ArticleDataService.getDetail(parseInt(id)).subscribe({\n                next: (resp) => setDetail(resp.data.info), error: (err) => {\n                    console.error('fail to fetch application list', err);\n                    snackBar.enqueueSnackbar(' 获取应用详情失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n            ActionService.handleAction('withdraw').pipe(\n                switchMap(() => ArticleDataService.withdraw(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/applications');\n                    snackBar.enqueueSnackbar(' 撤稿成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 撤稿失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n            ActionService.handleAction('publish').pipe(\n                switchMap(() => ArticleDataService.publish(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/applications');\n                    snackBar.enqueueSnackbar(' 发布成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 发布失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n        ] : [];\n\n        return () => {\n            if (actionSubscription.length > 0) {\n                for (const subscription of actionSubscription) {\n                    subscription.unsubscribe();\n                }\n            }\n        };\n    }, [id, snackBar, history]);\n\n    function goBack() {\n        history.goBack();\n    }\n\n    return <Grid container spacing={2} sx={{ pr: 2, pl: 1 }}>\n        <Grid container item xs={12}>\n            <Grid item xs={1} sx={{ pl: 1 }}>\n                <Button variant='outlined' onClick={goBack}>返回</Button>\n            </Grid>\n            <Grid item container justifyContent='flex-end' xs>\n                <ActionMenu status={detail?.status} isCreate={detail?.id === 0} />\n            </Grid>\n        </Grid>\n        <Grid item xs={12}>\n            <EditForm detail={detail} />\n        </Grid>\n    </Grid>;\n};","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderCellParams, GridRowModel } from '@mui/x-data-grid';\nimport { useHistory } from 'react-router';\n\nimport { ArticleDataService } from '../../services';\nimport { Article, ArticleFilter } from '../../models';\nimport { Box, Fab, IconButton, Link } from '@mui/material';\nimport { QuickFilterToolbar } from '../../components/table';\nimport AddIcon from '@mui/icons-material/Add';\nimport { tap } from 'rxjs';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\nimport { useSnackbar } from 'notistack';\n\nexport const News = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 3 });\n    const [dataSource, setDataSource] = useState<Article[]>([]);\n    const [totalSize, setTotalSize] = useState<number>(0);\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({ open: false });\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleDataService.getList(filter).subscribe({next: ({ errcode, data }) => {\n            if (errcode === 0) {\n                setDataSource(data.list);\n                setTotalSize(data.total);\n            } else {\n                console.error('fail to fetch news list', errcode);\n                snackBar.enqueueSnackbar(' 获取新闻列表失败', {\n                    variant: 'error',\n                });\n            }\n        }, error: (err) => {\n                console.error('fail to fetch news list', err);\n                snackBar.enqueueSnackbar(' 获取新闻列表失败', {\n                    variant: 'error',\n                });\n            } });\n    }, [filter, snackBar]);\n\n    function confirmDelete(item: GridRowModel) {\n        setDeleteDialog({\n            open: true, message: `确认删除其他信息: \"${item.title}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm(): void {\n                ArticleDataService.delete(item.id).pipe(\n                    tap(() => {\n                        setFilter({ ...filter });\n                        setDeleteDialog({ open: false });\n\n                        snackBar.enqueueSnackbar(' 删除新闻成功', {\n                            variant: 'success',\n                        });\n                    }),\n                ).subscribe({\n                    error: (err) => {\n\n                        console.error('fail to delete news', err);\n                        snackBar.enqueueSnackbar(' 删除新闻失败', {\n                            variant: 'error',\n                        });\n                    }\n                });\n            },\n        });\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '稿件Id',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (<Link href={`/admin/news/detail/${params.value}`} color='primary'\n                >{params.value}</Link>);\n            },\n        },\n        {\n            field: 'title',\n            headerName: '标题',\n            sortable: false,\n        },\n        {\n            field: 'type_id',\n            headerName: '类型',\n            sortable: false,\n        },\n        {\n            field: 'status',\n            headerName: '状态',\n            sortable: false,\n        },\n        {\n            field: 'read_cnt',\n            headerName: '阅读次数',\n            sortable: false,\n        },\n        {\n            field: 'created_time',\n            headerName: '创建时间',\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <>\n                        <IconButton component={Link} href={`/admin/news/detail/${params.row.id}`}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => confirmDelete(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    function createItem() {\n        history.push('/admin/news/create');\n    }\n\n    return (<Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={totalSize}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: QuickFilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        value: filter.kw,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={dataSource}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={createItem}\n            >\n                <AddIcon />\n            </Fab>\n            <ConfirmDeleteDialog {...deleteDialog} />\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>\n                 新闻中心\n            </Portal>\n\n        </Box>\n    );\n};","import React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n    Box,\n    Button,\n    Grid,\n    Paper,\n    TextField,\n    Typography,\n    ImageList,\n    ImageListItem,\n    MenuItem,\n} from '@mui/material';\nimport { Article, ArticleType, ArticleTypeListResponse } from '../../../models';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { ActionService, ArticleDataService, ArticleTypeDataService, FileUploadService } from '../../../services';\nimport { UploadAdaptorPlugin } from '../../../components/form/upload-adaptor-plugin';\nimport { switchMap } from 'rxjs';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\n\nexport const EditForm: React.FC<{ detail: Article }> = ({\n                                                            detail,\n                                                        }) => {\n    const [formDetail, setFormDetail] = useState<Article>(detail);\n    const [categoryList, setCategoryList] = useState<ArticleType[]>([]);\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleTypeDataService.getList(2).subscribe((resp: ArticleTypeListResponse) => {\n            const categoryList = resp.data.list;\n            setCategoryList(categoryList);\n        });\n    }, []);\n\n    useEffect(() => {\n        const saveAction = ActionService.handleAction('save').pipe(switchMap(() => {\n            return !formDetail.id ? ArticleDataService.creat({\n                category: 3,\n                content: formDetail.content,\n                summary: formDetail.summary,\n                title: formDetail.title,\n                type_id: formDetail.type_id,\n                covers: formDetail.covers.map(x => x.img),\n            }) : ArticleDataService.edit({\n                content: formDetail.content,\n                id: formDetail.id,\n                summary: formDetail.summary,\n                title: formDetail.title,\n                type_id: formDetail.type_id,\n                covers: formDetail.covers.map(x => x.img),\n            });\n        })).subscribe({\n            next: () => {\n                history.push('/admin/news');\n\n                snackBar.enqueueSnackbar(' 保存新闻成功', {\n                    variant: 'success',\n                });\n            }, error: err => {\n                console.error('fail to save news ', err);\n                snackBar.enqueueSnackbar(' 保存新闻失败', {\n                    variant: 'error',\n                });\n            },\n        });\n\n        return () => {\n            saveAction.unsubscribe();\n        };\n    }, [formDetail, snackBar, history]);\n\n    function updateInputValue(key: string): (e: ChangeEvent<HTMLInputElement>) => void {\n        return (e) => {\n            const value = e.target.value;\n            setFormDetail((state) => ({\n                ...state,\n                [key]: value,\n            }));\n        };\n    }\n\n    function handleCategoryChange(e) {\n        const targetCategory = categoryList.find(x => x.id === e.target.value);\n        setFormDetail((state) => ({\n            ...state,\n            type: [\n                targetCategory,\n            ],\n            type_id: targetCategory.id,\n        }));\n    }\n\n    function handleCoverUpload(e) {\n        const files = e.target.files;\n        if (files && files.length > 0) {\n            const formData = new FormData();\n            formData.append('file', files[0]);\n\n            FileUploadService.postImage(formData).subscribe((resp) => {\n                setFormDetail((state) => {\n                    const covers = state.covers ?? [];\n                    covers.push({\n                        id: -Math.ceil(Math.random() * 1000),\n                        article_id: formDetail.id,\n                        img: resp.data.url,\n                    });\n\n                    return {\n                        ...state,\n                        covers,\n                    };\n                });\n            });\n        }\n    }\n\n    function handleContentUpdate(event, editor): void {\n        const rawContent = editor.getData();\n\n        setFormDetail((state) => ({\n            ...state,\n            content: rawContent,\n        }));\n        console.log('editor update >>>', rawContent);\n    }\n\n    function clearSelectedFile(e) {\n        e.target.value = null;\n    }\n\n    return <Box sx={{ '& .MuiTextField-root': { mt: 1, mb: 1 } }} component='form'>\n        <Grid container>\n            <Grid item xs={12}>\n                <TextField\n                    select\n                    sx={{ minWidth: '200px' }}\n                    id='news-category'\n                    onChange={handleCategoryChange}\n                    value={formDetail.type_id > 0 ? formDetail.type_id : ''}\n                    label='新闻类型'>\n                    {\n                        categoryList.map(x => {\n                            return <MenuItem key={x.id} value={x.id}>\n                                {x.name}\n                            </MenuItem>;\n                        })\n                    }\n                </TextField>\n            </Grid>\n            <Grid item xs={12}>\n                <TextField fullWidth label='标题' defaultValue={formDetail.title} onChange={updateInputValue('title')} />\n            </Grid>\n            <Grid item xs={12}>\n                <TextField fullWidth label='摘要' rows='4' defaultValue={formDetail.summary}\n                           onChange={updateInputValue('summary')} />\n            </Grid>\n            <Grid item xs={12}>\n                <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                    <Grid container>\n                        <Grid item xs={1}>\n                            <Typography variant='subtitle1'>封面</Typography>\n                        </Grid>\n                        <Grid item container xs justifyContent='flex-end'>\n                            <label htmlFor='upload-cover'>\n                                <input style={{ display: 'none' }} accept='image/*' id='upload-cover' type='file'\n                                       onChange={handleCoverUpload} onClick={clearSelectedFile} />\n                                <Button variant='contained' component='span'>\n                                    添加封面\n                                </Button>\n                            </label>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <ImageList sx={{ minHeight: '160px', width: '100%' }} cols={5} rowHeight={164}>\n                                {formDetail.covers?.map((item) => (\n                                    <ImageListItem key={item.id}>\n                                        <img\n                                            src={`${item.img}`}\n                                            srcSet={`${item.img}`}\n                                            loading='lazy'\n                                            alt={''}\n                                        />\n                                    </ImageListItem>\n                                )) ?? <div />}\n                            </ImageList>\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n            <Grid item container xs={12}>\n                <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                    <Grid container>\n                        <Grid item xs={1}>\n                            <Typography variant='subtitle1'>内容</Typography>\n                        </Grid>\n                        <Grid item\n                              sx={{\n                                  height: '420px',\n                                  '& .ck-editor__main, & .ck-content': { height: '380px' },\n                              }}\n                              xs={12}>\n                            <CKEditor\n                                config={{\n                                    extraPlugins: [UploadAdaptorPlugin],\n                                }}\n                                editor={ClassicEditor}\n                                data={formDetail.content}\n                                onChange={handleContentUpdate}\n                            />\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n        </Grid>\n    </Box>;\n};","import React, { useEffect, useState } from 'react';\nimport { Article } from '../../../models';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { ActionService, ArticleDataService } from '../../../services';\nimport { Button, Grid } from '@mui/material';\n\nimport { EditForm } from '../components/edit-form';\nimport { ActionMenu } from '../../../components/form/action-menu';\nimport { useSnackbar } from 'notistack';\nimport { switchMap } from 'rxjs';\n\nexport const NewsDetail: React.FC = (props) => {\n    const [detail, setDetail] = useState<Article>(\n        {\n            id: 0,\n            category: 3,\n            content: '',\n            covers: [],\n            read_cnt: 0,\n            status: 0,\n            summary: '',\n            title: '',\n            type: [],\n            type_id: -1,\n            created_at: '',\n            updated_at: '',\n        },\n    );\n\n    const snackBar = useSnackbar();\n    const history = useHistory();\n    const { params } = useRouteMatch<{ id: string }>();\n    const { id } = params;\n\n    useEffect(() => {\n        let actionSubscription = id ? [\n            ArticleDataService.getDetail(parseInt(id)).subscribe({\n                next: (resp) => setDetail(resp.data.info), error: (err) => {\n                    console.error('fail to fetch product detail', err);\n                    snackBar.enqueueSnackbar(' 获取新闻详情失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n            ActionService.handleAction('withdraw').pipe(\n                switchMap(() => ArticleDataService.withdraw(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/news');\n                    snackBar.enqueueSnackbar(' 撤稿成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 撤稿失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n\n            ActionService.handleAction('publish').pipe(\n                switchMap(() => ArticleDataService.publish(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/news');\n                    snackBar.enqueueSnackbar(' 发布成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 发布失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n        ] : [];\n\n        return () => {\n            if (actionSubscription.length > 0) {\n                for (const subscription of actionSubscription) {\n                    subscription.unsubscribe();\n                }\n            }\n        };\n    }, [id, snackBar, history]);\n\n    function goBack() {\n        history.goBack();\n    }\n\n    return <Grid container spacing={2} sx={{ pr: 2, pl: 1 }}>\n        <Grid container item xs={12}>\n            <Grid item xs={1} sx={{ pl: 1 }}>\n                <Button variant='outlined' onClick={goBack}>返回</Button>\n            </Grid>\n            <Grid item container justifyContent='flex-end' xs>\n                <ActionMenu status={detail?.status} isCreate={detail?.id === 0} />\n            </Grid>\n        </Grid>\n        <Grid item xs={12}>\n            <EditForm detail={detail} />\n        </Grid>\n    </Grid>;\n};","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderCellParams, GridRowModel } from '@mui/x-data-grid';\nimport { useHistory } from 'react-router';\n\nimport { ArticleDataService } from '../../services';\nimport { Article, ArticleFilter } from '../../models';\nimport { Box, Fab, IconButton, Link } from '@mui/material';\nimport { QuickFilterToolbar } from '../../components/table';\nimport AddIcon from '@mui/icons-material/Add';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { tap } from 'rxjs';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\nimport { useSnackbar } from 'notistack';\n\nexport const Others = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 0 });\n    const [dataSource, setDataSource] = useState<Article[]>([]);\n    const [totalSize, setTotalSize] = useState<number>(0);\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({ open: false });\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleDataService.getList(filter).subscribe({\n            next: ({ errcode, data }) => {\n                if (errcode === 0) {\n                    setDataSource(data.list);\n                    setTotalSize(data.total);\n                } else {\n                    console.error('fail to fetch others list', errcode);\n                    snackBar.enqueueSnackbar(' 获取其他列表失败', {\n                        variant: 'error',\n                    });\n                }\n            }, error: (err) => {\n                console.error('fail to fetch others list', err);\n                snackBar.enqueueSnackbar(' 获取其他列表失败', {\n                    variant: 'error',\n                });\n            },\n        });\n    }, [filter, snackBar]);\n\n    function confirmDelete(item: GridRowModel) {\n        setDeleteDialog({\n            open: true, message: `确认删除其他信息: \"${item.title}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm(): void {\n                ArticleDataService.delete(item.id).pipe(\n                    tap(() => {\n                        setFilter({ ...filter });\n                        setDeleteDialog({ open: false });\n\n                        snackBar.enqueueSnackbar(' 删除其他信息成功', {\n                            variant: 'success',\n                        });\n                    }),\n                ).subscribe({\n                    error: (err) => {\n                        console.error('fail to fetch others list', err);\n                        snackBar.enqueueSnackbar(' 删除其他信息失败', {\n                            variant: 'error',\n                        });\n                    },\n                });\n            },\n        });\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '稿件Id',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <Link\n                        href={`/admin/others/detail/${params.value}`}\n                        color='primary'\n                    >\n                        {params.value}\n                    </Link>);\n            },\n        },\n        {\n            field: 'title',\n            headerName: '标题',\n            sortable: false,\n        },\n        {\n            field: 'type_id',\n            headerName: '类型',\n            sortable: false,\n        },\n        {\n            field: 'status',\n            headerName: '状态',\n            sortable: false,\n        },\n        {\n            field: 'read_cnt',\n            headerName: '阅读次数',\n            sortable: false,\n        },\n        {\n            field: 'created_time',\n            headerName: '创建时间',\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <>\n                        <IconButton component={Link} href={`/admin/others/detail/${params.row.id}`}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => confirmDelete(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    function createItem() {\n        history.push('/admin/others/create');\n    }\n\n    return (<Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={totalSize}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: QuickFilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        value: filter.kw,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={dataSource}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={createItem}\n            >\n                <AddIcon />\n            </Fab>\n            <ConfirmDeleteDialog {...deleteDialog} />\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>\n                其他\n            </Portal>\n        </Box>\n    );\n};\n","import React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n    Box,\n    Button,\n    Grid,\n    Paper,\n    TextField,\n    Typography,\n    ImageList,\n    ImageListItem,\n    MenuItem,\n} from '@mui/material';\nimport { Article } from '../../../models';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { ActionService, ArticleDataService, FileUploadService } from '../../../services';\nimport { UploadAdaptorPlugin } from '../../../components/form/upload-adaptor-plugin';\nimport { switchMap } from 'rxjs';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\n\nexport const EditForm: React.FC<{ detail: Article }> = ({\n                                                            detail,\n                                                        }) => {\n    const [formDetail, setFormDetail] = useState<Article>(detail);\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        const saveAction = ActionService.handleAction('save').pipe(switchMap(() => {\n            return !formDetail.id ? ArticleDataService.creat({\n                category: 0,\n                content: formDetail.content,\n                summary: formDetail.summary,\n                title: formDetail.title,\n                type_id: formDetail.type_id,\n                covers: formDetail.covers.map(x => x.img),\n            }) : ArticleDataService.edit({\n                content: formDetail.content,\n                id: formDetail.id,\n                summary: formDetail.summary,\n                title: formDetail.title,\n                type_id: formDetail.type_id,\n                covers: formDetail.covers.map(x => x.img),\n            });\n        })).subscribe({\n            next: () => {\n                history.push('/admin/others');\n            }, error: (err) => {\n                console.error('fail to save others', err);\n                snackBar.enqueueSnackbar(' 保存其他信息失败', {\n                    variant: 'error',\n                });\n            },\n        });\n\n        return () => {\n            saveAction.unsubscribe();\n        };\n    }, [formDetail, snackBar, history]);\n\n    function updateInputValue(key: string): (e: ChangeEvent<HTMLInputElement>) => void {\n        return (e) => {\n            const value = e.target.value;\n            setFormDetail((state) => ({\n                ...state,\n                [key]: value,\n            }));\n        };\n    }\n\n    function handleCoverUpload(e) {\n        const files = e.target.files;\n        if (files && files.length > 0) {\n            const formData = new FormData();\n            formData.append('file', files[0]);\n\n            FileUploadService.postImage(formData).subscribe({\n                next: (resp) => {\n                    setFormDetail((state) => {\n                        const covers = state.covers ?? [];\n                        covers.push({\n                            id: -Math.ceil(Math.random() * 1000),\n                            article_id: formDetail.id,\n                            img: resp.data.url,\n                        });\n\n                        return {\n                            ...state,\n                            covers,\n                        };\n                    });\n                }, error: (err) => {\n                    console.error('fail to upload cover', err);\n                    snackBar.enqueueSnackbar(' 上传封面失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n        }\n    }\n\n    function handleContentUpdate(event, editor): void {\n        const rawContent = editor.getData();\n\n        setFormDetail((state) => ({\n            ...state,\n            content: rawContent,\n        }));\n        console.log('editor update >>>', rawContent);\n    }\n\n    function clearSelectedFile(e) {\n        e.target.value = null;\n    }\n\n    return <Box sx={{ '& .MuiTextField-root': { mt: 1, mb: 1 } }} component='form'>\n        <Grid container>\n            <Grid item xs={12}>\n                <TextField\n                    select\n                    sx={{ minWidth: '200px', mr: 1 }}\n                    id='other-category-root'\n                    label='类型'\n                    value={'0'}\n                    SelectProps={{\n                        readOnly: true,\n                    }}\n                >\n                    <MenuItem key='0' value='0'>\n                        其他\n                    </MenuItem>\n                </TextField>\n            </Grid>\n            <Grid item xs={12}>\n                <TextField fullWidth label='标题' defaultValue={formDetail.title} onChange={updateInputValue('title')} />\n            </Grid>\n            <Grid item xs={12}>\n                <TextField fullWidth label='摘要' rows='4' defaultValue={formDetail.summary}\n                           onChange={updateInputValue('summary')} />\n            </Grid>\n            <Grid item xs={12}>\n                <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                    <Grid container>\n                        <Grid item xs={1}>\n                            <Typography variant='subtitle1'>封面</Typography>\n                        </Grid>\n                        <Grid item container xs justifyContent='flex-end'>\n                            <label htmlFor='upload-cover'>\n                                <input style={{ display: 'none' }} accept='image/*' id='upload-cover' type='file'\n                                       onChange={handleCoverUpload} onClick={clearSelectedFile} />\n                                <Button variant='contained' component='span'>\n                                    添加封面\n                                </Button>\n                            </label>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <ImageList sx={{ minHeight: '160px', width: '100%' }} cols={5} rowHeight={164}>\n                                {formDetail.covers?.map((item) => (\n                                    <ImageListItem key={item.id}>\n                                        <img\n                                            src={`${item.img}`}\n                                            srcSet={`${item.img}`}\n                                            loading='lazy'\n                                            alt={''}\n                                        />\n                                    </ImageListItem>\n                                )) ?? <div />}\n                            </ImageList>\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n            <Grid item container xs={12}>\n                <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                    <Grid container>\n                        <Grid item xs={1}>\n                            <Typography variant='subtitle1'>内容</Typography>\n                        </Grid>\n                        <Grid item\n                              sx={{\n                                  height: '420px',\n                                  '& .ck-editor__main, & .ck-content': { height: '380px' },\n                              }}\n                              xs={12}>\n                            <CKEditor\n                                config={{\n                                    extraPlugins: [UploadAdaptorPlugin],\n                                }}\n                                editor={ClassicEditor}\n                                data={formDetail.content}\n                                onChange={handleContentUpdate}\n                            />\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n        </Grid>\n    </Box>;\n};","import React, { useEffect, useState } from 'react';\nimport { Article } from '../../../models';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { ActionService, ArticleDataService } from '../../../services';\nimport { Button, Grid } from '@mui/material';\n\nimport { EditForm } from '../components/edit-form';\nimport { ActionMenu } from '../../../components/form/action-menu';\nimport { useSnackbar } from 'notistack';\nimport { switchMap } from 'rxjs';\n\nexport const OtherDetail: React.FC = (props) => {\n    const [detail, setDetail] = useState<Article>(\n        {\n            id: 0,\n            category: 0,\n            content: '',\n            covers: [],\n            read_cnt: 0,\n            status: 0,\n            summary: '',\n            title: '',\n            type: [],\n            type_id: 0,\n            created_at: '',\n            updated_at: '',\n        },\n    );\n\n    const snackBar = useSnackbar();\n    const history = useHistory();\n    const { params } = useRouteMatch<{ id: string }>();\n    const { id } = params;\n\n    useEffect(() => {\n        let actionSubscription = id ? [\n            ArticleDataService.getDetail(parseInt(id)).subscribe({\n                next: (resp) => setDetail(resp.data.info), error: (err) => {\n                    console.error('fail to fetch others detail', err);\n                    snackBar.enqueueSnackbar(' 获取其他详细信息失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n            ActionService.handleAction('withdraw').pipe(\n                switchMap(() => ArticleDataService.withdraw(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/others');\n                    snackBar.enqueueSnackbar(' 撤稿成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 撤稿失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n\n            ActionService.handleAction('publish').pipe(\n                switchMap(() => ArticleDataService.publish(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/others');\n                    snackBar.enqueueSnackbar(' 发布成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 发布失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n        ] : [];\n\n        return () => {\n            if (actionSubscription.length > 0) {\n                for (const subscription of actionSubscription) {\n                    subscription.unsubscribe();\n                }\n            }\n        };\n    }, [id, snackBar, history]);\n\n    function goBack() {\n        history.goBack();\n    }\n\n    return <Grid container spacing={2} sx={{ pr: 2, pl: 1 }}>\n        <Grid container item xs={12}>\n            <Grid item xs={1} sx={{ pl: 1 }}>\n                <Button variant='outlined' onClick={goBack}>返回</Button>\n            </Grid>\n            <Grid item container justifyContent='flex-end' xs>\n                <ActionMenu status={detail?.status} isCreate={detail?.id === 0} />\n            </Grid>\n        </Grid>\n        <Grid item xs={12}>\n            <EditForm detail={detail} />\n        </Grid>\n    </Grid>;\n};","import { Grid, IconButton, MenuItem, TextField } from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport React from 'react';\n\nexport const categoryList = {\n    0: '产品类型',\n    1: '应用类型',\n    2: '新闻类型',\n    3: '其他类型',\n};\n\nexport const FilterToolbar: React.FC<{ filter, setFilter }> = ({ filter, setFilter }) => {\n    function handleFilterTypeChange(e) {\n        setFilter({\n            limit: filter.limit,\n            offset: 0,\n            category: e.target.value,\n            kw: '',\n        });\n    }\n\n    function handleKWChange(e) {\n        setFilter((state) => ({\n            ...state,\n            offset: 0,\n            kw: e.target?.value ?? '',\n        }));\n    }\n\n    return <Grid container spacing={1} sx={{ m: 1 }}>\n        <Grid item xs={2}>\n            <TextField\n                select\n                fullWidth\n                id='category-filter'\n                label='类型'\n                value={filter.category}\n                onChange={handleFilterTypeChange}\n            >\n                {\n                    Object.entries(categoryList).map(([key, value]) => {\n                        return <MenuItem key={`category-${key}`} value={parseInt(key)}>\n                            {value}\n                        </MenuItem>;\n                    })\n                }\n            </TextField>\n        </Grid>\n        <Grid item xs={3} sx={{ display: 'flex', alignItems: 'center' }}>\n            <TextField\n                variant='standard'\n                value={filter.kw}\n                onChange={handleKWChange}\n                placeholder='关键字查找'\n                InputProps={{\n                    startAdornment: <SearchIcon fontSize='small' />,\n                    endAdornment: (\n                        <IconButton\n                            title='Clear'\n                            aria-label='Clear'\n                            size='small'\n                            style={{ visibility: filter.kw ? 'visible' : 'hidden' }}\n                            onClick={handleKWChange}\n                        >\n                            <ClearIcon fontSize='small' />\n                        </IconButton>\n                    ),\n                }}\n            />\n        </Grid>\n    </Grid>;\n};\n","import React, { useState } from 'react';\nimport { ArticleType } from '../../../models';\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    MenuItem,\n    TextField,\n} from '@mui/material';\n\nexport interface CategoryDetailDialogProps {\n    category: number,\n    title: string,\n    typeList: ArticleType[],\n    open: boolean,\n    typeDetail?: ArticleType,\n    onSave?: (form: ArticleType) => void,\n    onClose?: () => void\n}\n\nexport const CategoryDetailDialog: React.FC<CategoryDetailDialogProps> = ({\n                                                                              category,\n                                                                              title,\n                                                                              open,\n                                                                              typeList,\n                                                                              onSave,\n                                                                              onClose,\n                                                                              typeDetail,\n                                                                          }) => {\n    const [formDetail, setFormDetail] = useState<ArticleType>(typeDetail);\n\n    function handleClose() {\n        onClose && onClose();\n    }\n\n    function handleSubmit() {\n        onSave && onSave(formDetail);\n    }\n\n    function handleNameChange(e) {\n        setFormDetail((state) => ({\n            ...state,\n            name: e.target.value,\n        }));\n    }\n\n    function handleParentIdChange(e) {\n        setFormDetail((state) => ({\n            ...state,\n            parent_id: e.target.value,\n        }));\n    }\n\n    return <Dialog open={open}>\n        <DialogTitle>`新增${title}`</DialogTitle>\n        <DialogContent>\n            <TextField\n                autoFocus\n                required\n                margin='dense'\n                id='name'\n                label='名称'\n                type='text'\n                value={formDetail.name}\n                fullWidth\n                onChange={handleNameChange}\n            />\n            {category === 0 &&\n            <TextField\n                select\n                autoFocus\n                margin='dense'\n                id='parent_id'\n                label='父级类型'\n                type='text'\n                value={formDetail.parent_id}\n                fullWidth\n                onChange={handleParentIdChange}\n                SelectProps={{\n                    readOnly: formDetail.id >= 0,\n                }}\n            >\n                <MenuItem key='empty' value={null}>\n                    无\n                </MenuItem>\n                {\n                    typeList.map(x => {\n                        return <MenuItem key={x.id} value={x.id}>\n                            {x.name}\n                        </MenuItem>;\n                    })\n                }\n            </TextField>\n            }\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={handleClose}>Cancel</Button>\n            <Button onClick={handleSubmit}>Subscribe</Button>\n        </DialogActions>\n    </Dialog>;\n\n};","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderEditCellParams } from '@mui/x-data-grid';\n\nimport { ArticleTypeDataService } from '../../services';\nimport { ArticleType, ArticleFilter } from '../../models';\nimport { Box, Fab, IconButton } from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { categoryList, FilterToolbar } from './components/filter-toolbar';\nimport { CategoryDetailDialog, CategoryDetailDialogProps } from './components/category-detail-dialog';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { tap } from 'rxjs';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\n\n\nexport const Settings = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 0 });\n    const [dataSource, setDataSource] = useState<ArticleType[]>([]);\n    const [detailDialog, setDetailDialog] = useState<CategoryDetailDialogProps>({\n        open: false, category: -1, typeList: [], title: '',\n    });\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({\n        open: false,\n    });\n\n    useEffect(() => {\n        const typeListSubscription = ArticleTypeDataService.getList(filter.category).subscribe(({ errcode, data }) => {\n            if (errcode === 0) {\n                setDataSource(data.list);\n            } else {\n                // TODO: Notify user error\n            }\n        });\n\n        return () => {\n            typeListSubscription.unsubscribe();\n        };\n    }, [filter.category]);\n\n    function deleteItem(item: ArticleType) {\n        setDeleteDialog({\n            open: true, message: `确认删除\"${item.name}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm(): void {\n                ArticleTypeDataService.delete(item.id).pipe(\n                    tap(() => {\n                        setFilter({ ...filter });\n                        setDeleteDialog({ open: false });\n                    }),\n                ).subscribe();\n            },\n        });\n\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '类型Id',\n            sortable: false,\n        },\n        {\n            field: 'name',\n            headerName: '名称',\n            sortable: false,\n        },\n        {\n            field: 'parent_id',\n            headerName: '父类型id',\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderEditCellParams) => {\n                return (\n                    <>\n                        <IconButton onClick={() => editItemDialog(params.row)}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => deleteItem(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    const filterData = () => {\n        let result = dataSource;\n        if (filter.kw) {\n            result = dataSource.filter(x => x.name.includes(filter.kw));\n        }\n\n        const step = filter.offset * filter.limit;\n        return result.filter((x, i) => i >= step && i < (step + filter.limit));\n    };\n\n    function closeDetailDialog() {\n        setDetailDialog((state) => ({\n            ...state,\n            onSave: null,\n            onClose: null,\n            open: false,\n        }));\n    }\n\n    function createItem(newForm: ArticleType) {\n        ArticleTypeDataService.creat({\n            category: newForm.category,\n            name: newForm.name,\n            parent_id: newForm.parent_id,\n        }).subscribe();\n    }\n\n    function saveItem(newForm: ArticleType) {\n        ArticleTypeDataService.edit({\n            id: newForm.id,\n            name: newForm.name,\n        }).subscribe();\n    }\n\n    function editItemDialog(item: ArticleType) {\n        setDetailDialog({\n            open: true,\n            title: `编辑${categoryList[filter.category]}`,\n            category: filter.category,\n            typeList: dataSource,\n            onClose: closeDetailDialog,\n            onSave: saveItem,\n            typeDetail: item,\n        });\n    }\n\n    function newItemDialog() {\n        setDetailDialog({\n            open: true,\n            title: `新增${categoryList[filter.category]}`,\n            category: filter.category,\n            typeList: dataSource,\n            onClose: closeDetailDialog,\n            onSave: createItem,\n            typeDetail: {\n                id: -1,\n                name: '',\n                parent_id: null,\n                category: filter.category,\n            },\n        });\n    }\n\n    return (\n        <Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={dataSource.length}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: FilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        filter,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={filterData()}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={newItemDialog}\n            >\n                <AddIcon />\n            </Fab>\n            <CategoryDetailDialog {...detailDialog} />\n            <ConfirmDeleteDialog {...deleteDialog} />\n\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>\n                 类型设置\n            </Portal>\n        </Box>\n    );\n};\n","import React, { useMemo, useState } from 'react';\nimport { Avatar, Box, Button, Container, TextField, Typography } from '@mui/material';\n\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport { LoginService } from '../../services';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\n\nexport const Login = () => {\n    const [codeState, setCodeState] = useState(new Date().valueOf());\n    const [loginForm, setLoginForm] = useState({\n        email: '',\n        password: '',\n        code: '',\n    });\n    const [errorForm, setErrorForm] = useState({\n        email: false,\n        password: false,\n        code: false,\n        summary: '',\n    });\n    const history = useHistory();\n    const snakeBar = useSnackbar();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        if (loginForm.email && loginForm.password && loginForm.code) {\n            setErrorForm({\n                email: false,\n                code: false,\n                password: false,\n                summary: '',\n            });\n            LoginService.signIn(loginForm).subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 200) {\n                        history.push('/');\n                    } else {\n                        setErrorForm({\n                            ...errorForm,\n                            summary: resp.errmessage,\n                        });\n                    }\n                },\n                error: (err) => {\n                    snakeBar.enqueueSnackbar('登录失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n        } else {\n            const newState = {\n                email: !loginForm.email,\n                password: !loginForm.password,\n                code: !loginForm.code,\n            };\n            setErrorForm({ ...errorForm, ...newState });\n        }\n    }\n\n    function updatedFormValue(key) {\n        return (e) => {\n            setErrorForm({\n                ...errorForm,\n                [key]: !e.target?.value,\n            });\n\n            setLoginForm((state) => ({\n                ...state,\n                [key]: e.target.value,\n            }));\n        };\n    }\n\n    function refreshCode(): void {\n        setCodeState(new Date().valueOf());\n    }\n\n    const codeUrl = useMemo(() => {\n        return `/verify/code?state=${codeState}`;\n    }, [codeState]);\n\n    return (\n        <Container maxWidth='xs'>\n            <Box\n                sx={{\n                    marginTop: 8,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                }}>\n                <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\n                    <LockOutlinedIcon />\n                </Avatar>\n                <Typography component='h1' variant='h5'>\n                    登录\n                </Typography>\n                <Box component='form' onSubmit={handleSubmit} noValidate sx={{ mt: 1 }}>\n                    <TextField\n                        margin='normal'\n                        required\n                        fullWidth\n                        id='email'\n                        label='电子邮箱'\n                        name='email'\n                        autoComplete='email'\n                        autoFocus\n                        value={loginForm.email}\n                        onChange={updatedFormValue('email')}\n                        error={errorForm.email}\n                        helperText={errorForm.email && '请输入电子邮箱'}\n                    />\n                    <TextField\n                        margin='normal'\n                        required\n                        fullWidth\n                        name='password'\n                        label='密码'\n                        type='password'\n                        id='password'\n                        autoComplete='current-password'\n                        value={loginForm.password}\n                        onChange={updatedFormValue('password')}\n                        error={errorForm.password}\n                        helperText={errorForm.password && '请输入密码'}\n                    />\n                    <TextField\n                        margin='normal'\n                        required\n                        fullWidth\n                        name='code'\n                        label='验证码'\n                        id='code'\n                        value={loginForm.code}\n                        onChange={updatedFormValue('code')}\n                        InputProps={{\n                            endAdornment: <img src={codeUrl} onClick={refreshCode} alt='验证码' />,\n                        }}\n                        error={errorForm.code}\n                        helperText={errorForm.code && '请输入验证码'}\n                    />\n                    {errorForm.summary && (\n                        <Typography variant='overline' color={'red'}>\n                            {errorForm.summary}\n                        </Typography>\n                    )}\n                    <Button type='submit' fullWidth variant='contained' sx={{ mt: 3, mb: 2 }}>\n                        登录\n                    </Button>\n                </Box>\n            </Box>\n        </Container>\n    );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Box } from \"@mui/material\";\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport { AuthLayout, PublicLayout } from \"../layout\";\nimport { Products } from \"../pages/products\";\nimport { ProductDetail } from \"../pages/products/detail\";\nimport { Applications } from \"../pages/applications\";\nimport { ApplicationDetail } from \"../pages/applications/detail\";\nimport { News } from \"../pages/news\";\nimport { NewsDetail } from \"../pages/news/detail\";\nimport { Others } from \"../pages/others\";\nimport { OtherDetail } from \"../pages/others/detail\";\nimport { Settings } from \"../pages/settings\";\nimport { Login } from \"../pages/login\";\nimport { useHistory } from \"react-router\";\nimport { UserService } from \"../services\";\n\nexport const RouterConfig = () => {\n    const history = useHistory();\n    const [auth, setAuth] = useState(null);\n\n    useEffect(() => {\n        const useInfoSubscription = UserService.getUserInfo().subscribe({\n            next: (resp) => {\n                if (resp.errcode === 401) {\n                    history.push(\"/admin/login\");\n                    setAuth(false);\n                } else {\n                    setAuth(true);\n                }\n            },\n            error: (error) => {\n                console.error(\"fail to get user info\", error);\n                history.push(\"/admin/login\");\n                setAuth(false);\n            }\n        });\n\n        return () => {\n            useInfoSubscription.unsubscribe();\n        };\n    }, [history, auth]);\n\n    return (\n      <Box sx={{\n          height: '100vh',\n          overflowY: 'auto',\n      }}>\n          <Switch>\n              <Route path={\"/admin/login\"} exact={true}>\n                  <PublicLayout>\n                      <Login />\n                  </PublicLayout>\n              </Route>\n          </Switch>\n          {\n              auth &&\n              <AuthLayout>\n                <Switch>\n                  <Route path={\"/\"} exact={true}>\n                    <Redirect to={\"/admin/products\"} />\n                  </Route>\n                  <Route path={\"/admin/settings\"} exact={true}>\n                    <Settings />\n                  </Route>\n                  <Route path={\"/admin/products\"} exact={true}>\n                    <Products />\n                  </Route>\n                  <Route path={\"/admin/products/create\"} exact={true}>\n                    <ProductDetail />\n                  </Route>\n                  <Route path={\"/admin/products/detail/:id\"} exact={true}>\n                    <ProductDetail />\n                  </Route>\n                  <Route path={\"/admin/applications\"} exact={true}>\n                    <Applications />\n                  </Route>\n                  <Route path={\"/admin/applications/create\"} exact={true}>\n                    <ApplicationDetail />\n                  </Route>\n                  <Route path={\"/admin/applications/detail/:id\"} exact={true}>\n                    <ApplicationDetail />\n                  </Route>\n                  <Route path={\"/admin/news\"} exact={true}>\n                    <News />\n                  </Route>\n                  <Route path={\"/admin/news/create\"} exact={true}>\n                    <NewsDetail />\n                  </Route>\n                  <Route path={\"/admin/news/detail/:id\"} exact={true}>\n                    <NewsDetail />\n                  </Route>\n                  <Route path={\"/admin/others\"} exact={true}>\n                    <Others />\n                  </Route>\n                  <Route path={\"/admin/others/create\"} exact={true}>\n                    <OtherDetail />\n                  </Route>\n                  <Route path={\"/admin/others/detail/:id\"} exact={true}>\n                    <OtherDetail />\n                  </Route>\n                </Switch>\n              </AuthLayout>\n          }\n      </Box>\n    );\n};\n","import React from 'react';\nimport { CssBaseline, ThemeProvider } from '@mui/material';\nimport theme from './theme';\nimport { RouterConfig } from './route';\nimport { SnackbarProvider } from 'notistack';\n\nexport const App = (props) => {\n    return (\n        <ThemeProvider theme={theme}>\n            <CssBaseline />\n            <SnackbarProvider\n                maxSnack={3}\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                }}>\n                <RouterConfig />\n            </SnackbarProvider>\n        </ThemeProvider>\n    );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { App } from \"./App\";\nimport { loadCSRFToken } from \"./utils\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nif (process.env.NODE_ENV !== \"production\") {\n  // const worker = require('./mocks').default\n  // worker.start()\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n  reportWebVitals();\n}\n\n/**\n * Next we will register the CSRF Token as a common header with Axios so that\n * all outgoing HTTP requests automatically have it attached. This is just\n * a simple convenience so we don't have to attach every token manually.\n */\nlet token: HTMLInputElement = document.body.querySelector(\"input[name=\\\"_token\\\"]\");\n\nif (token) {\n  loadCSRFToken(token.value);\n} else {\n  console.error(\"CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token\");\n}\n"],"sourceRoot":""}