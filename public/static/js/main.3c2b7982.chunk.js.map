{"version":3,"sources":["theme/index.ts","services/loading-state-service.ts","utils/request.ts","services/article-data-service.ts","services/article-type-data-service.ts","services/file-upload-service.ts","services/action-service.ts","services/login-service.tsx","services/portal-message-service.ts","services/user-service.ts","components/portal/index.tsx","layout/app-bar.tsx","layout/menu.tsx","layout/auth-layout.tsx","layout/public-layout.tsx","components/table/quick-filter-toolbar.tsx","components/dialog/confirm-delete-dialog.tsx","pages/products/index.tsx","components/editor/upload-video-adaptor-plugin.ts","components/editor/upload-adaptor-plugin.ts","components/editor/config.ts","pages/products/components/edit-form.tsx","components/form/action-menu.tsx","pages/products/detail/index.tsx","pages/applications/index.tsx","pages/applications/components/edit-form.tsx","pages/applications/detail/index.tsx","pages/news/index.tsx","pages/news/components/edit-form.tsx","pages/news/detail/index.tsx","pages/others/index.tsx","pages/others/components/edit-form.tsx","pages/others/detail/index.tsx","pages/settings/components/filter-toolbar.tsx","pages/settings/components/category-detail-dialog.tsx","pages/settings/index.tsx","pages/login/index.tsx","route/index.tsx","App.tsx","index.tsx"],"names":["theme","createTheme","palette","primary","main","secondary","error","red","A400","zhCN","coreZhCN","loadingSubject","BehaviorSubject","loading","this","next","asObservable","axiosInstance","axios","create","timeout","headers","withCredentials","request","url","method","config","touchAuth","of","pipe","tap","LoadingStateService","setLoading","mergeMap","Object","assign","map","resp","data","catchError","response","status","window","location","reload","throwError","finalize","postFormData","post","getList","params","getDetail","id","edit","delete","publish","withdraw","category","creat","postImage","form","postVideo","actionSubject","Subject","save","handleAction","action","filter","x","signIn","email","password","code","encryptPwd","MD5","toString","signOut","_portalMessageSubject","message","type","body","getUserInfo","Portal","children","channel","useEffect","PortalMessageService","CHANNEL_APP_BAR_TITLE","StyleAppBar","styled","MuiAppBar","shouldForwardProp","prop","open","zIndex","drawer","transition","transitions","easing","sharp","duration","leavingScreen","marginLeft","enteringScreen","AppBar","toggleDrawer","useState","title","setTitle","titleSubscription","onMessage","subscribe","newTitle","unsubscribe","position","Toolbar","sx","pr","IconButton","edge","color","onClick","marginRight","Typography","component","variant","noWrap","flexGrow","Button","LoginService","openedMixin","width","marginTop","overflowX","DrawerHeader","display","alignItems","justifyContent","padding","spacing","mixins","toolbar","Drawer","MuiDrawer","flexShrink","whiteSpace","boxSizing","breakpoints","up","closedMixin","AppMenu","Divider","List","to","ListItem","ListItemIcon","ListItemText","AuthLayout","openDrawer","setOpenDrawer","Box","height","overflow","flexDirection","Container","maxWidth","Paper","mt","mb","PublicLayout","props","InlineSearchBox","flexWrap","down","borderBottom","divider","filterSubject","QuickFilterToolbar","inputRef","useRef","filterSubscription","debounceTime","value","setFilter","kw","offset","TextField","defaultValue","onChange","e","target","placeholder","InputProps","startAdornment","fontSize","endAdornment","size","style","visibility","current","ConfirmDeleteDialog","onClose","onConfirm","Dialog","DialogTitle","DialogContent","dividers","DialogContentText","DialogActions","autoFocus","Products","limit","dataSource","setDataSource","totalSize","setTotalSize","deleteDialog","setDeleteDialog","history","useHistory","snackBar","useSnackbar","ArticleDataService","errcode","list","total","console","enqueueSnackbar","err","cols","field","headerName","sortable","renderCell","flex","row","name","Link","item","p","autoHeight","disableColumnMenu","disableColumnFilter","pagination","pageSize","page","rowCount","rowsPerPageOptions","onPageChange","pageNumber","onPageSizeChange","components","componentsProps","columns","rows","Fab","bottom","right","push","uploadVideo","file","formData","FormData","append","Promise","resolve","lastValueFrom","FileUploadService","then","catch","uploadImage","CKEditorConfig","videoUpload","imageUpload","mediaEmbed","extraProviders","html","match","input","items","EditForm","detail","formDetail","setFormDetail","categoryList","setCategoryList","selectedRootCategory","setSelectedRootCategory","ArticleTypeDataService","type_id","find","parent_id","saveAction","ActionService","switchMap","content","summary","covers","img","errmessage","updateInputValue","key","state","Grid","container","xs","select","minWidth","mr","label","targetCategory","MenuItem","fullWidth","htmlFor","accept","files","length","Math","ceil","random","article_id","ImageList","minHeight","rowHeight","index","ImageListItem","src","srcSet","alt","ImageListItemBar","actionPosition","actionIcon","coverIndex","splice","editor","ClassicEditor","event","rawContent","getData","log","ActionMenu","isCreate","anchorEl","setAnchorEl","closeMenu","handleSave","undefined","disableElevation","currentTarget","endIcon","anchorOrigin","vertical","horizontal","transformOrigin","MenuListProps","PaperProps","ProductDetail","read_cnt","created_at","updated_at","setDetail","useRouteMatch","actionSubscription","parseInt","info","pl","goBack","Applications","ApplicationDetail","News","NewsDetail","Others","SelectProps","readOnly","OtherDetail","FilterToolbar","handleKWChange","m","entries","CategoryDetailDialog","typeList","onSave","typeDetail","required","margin","Settings","detailDialog","setDetailDialog","Date","valueOf","fetchFlag","setFetchFlag","typeListSubscription","closeDetailDialog","saveItem","filterData","result","includes","step","i","saveObserver","createItem","newForm","paginationMode","Login","codeState","setCodeState","loginForm","setLoginForm","errorForm","setErrorForm","snakeBar","updatedFormValue","codeUrl","useMemo","Avatar","bgcolor","onSubmit","preventDefault","newState","noValidate","autoComplete","helperText","RouterConfig","auth","setAuth","useInfoSubscription","UserService","overflowY","path","exact","App","ThemeProvider","CssBaseline","maxSnack","ReactDOM","render","StrictMode","document","getElementById","token","querySelector","defaults","common","loadCSRFToken"],"mappings":"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","file":"static/js/main.3c2b7982.chunk.js","sourcesContent":["import {red} from '@mui/material/colors';\nimport {createTheme} from '@mui/material/styles';\nimport { zhCN } from '@mui/x-data-grid'\nimport { zhCN as coreZhCN } from '@mui/material/locale'\n\n// A custom theme for this app\nconst theme = createTheme({\n        palette: {\n            primary: {\n                main: '#556cd6',\n            },\n            secondary: {\n                main: '#19857b',\n            },\n            error: {\n                main: red.A400,\n            },\n        },\n    },\n    zhCN,\n    coreZhCN\n);\n\nexport default theme;","import { BehaviorSubject, Observable } from 'rxjs'\n\nclass LoadingStateService {\n    loadingSubject = new BehaviorSubject(false)\n\n    setLoading(loading: boolean) {\n        this.loadingSubject.next(loading)\n    }\n\n    subscribe(): Observable<boolean> {\n        return this.loadingSubject.asObservable()\n    }\n}\n\nexport default new LoadingStateService()","import { catchError, finalize, map, mergeMap, of, tap, throwError } from 'rxjs';\nimport axios, { AxiosRequestConfig, AxiosResponse, Method } from 'axios';\nimport { LoadingStateService } from '../services';\n\nconst defaultRequestConfig = {\n    'Content-Type': 'application/json; charset=utf-8',\n    'X-Requested-With': 'XMLHttpRequest',\n};\n\nconst axiosInstance = axios.create({\n    timeout: 6000,\n    headers: defaultRequestConfig,\n    withCredentials: true,\n});\n\nexport function loadCSRFToken(token) {\n    axiosInstance.defaults.headers.common['X-CSRF-TOKEN'] = token;\n}\n\nexport const request = <T>(url: string, method: Method, config: AxiosRequestConfig = {}, touchAuth = false) => {\n    return of({}).pipe(\n        tap(() => LoadingStateService.setLoading(true)),\n        mergeMap(() =>\n            axiosInstance.request<T>(\n                Object.assign({}, config, {\n                    url,\n                    method,\n                })\n            )\n        ),\n        map((resp) => resp.data),\n        catchError((error) => {\n            if (error.response.status === 401 && !touchAuth) {\n                window.location.reload();\n            }\n            return throwError(() => error);\n        }),\n        finalize(() => LoadingStateService.setLoading(false))\n    );\n};\n\nexport const postFormData = <T>(\n    url: string,\n    data: FormData,\n    config: AxiosRequestConfig = {\n        headers: {\n            'Content-Type': 'multipart/form-data',\n        },\n    }\n) => {\n    return of({}).pipe(\n        tap(() => LoadingStateService.setLoading(true)),\n        mergeMap(() => axios.post<FormData, AxiosResponse<T>>(url, data, config)),\n        map((resp) => resp.data),\n        catchError((error) => {\n            return throwError(error);\n        }),\n        finalize(() => LoadingStateService.setLoading(false))\n    );\n};\n","import { request } from '../utils';\nimport {\n    ArticleCreateRequest,\n    ArticleDetailResponse,\n    ArticleEditRequest,\n    ArticleFilter,\n    ArticleListResponse,\n    VoidResponse,\n} from '../models';\n\nclass ArticleDataService {\n    getList = (params: ArticleFilter) => {\n        return request<ArticleListResponse>(`/admin/article/list`, 'GET', {\n            params,\n        });\n    };\n\n    getDetail = (id: number) => {\n        return request<ArticleDetailResponse>(`/admin/article/info`, 'GET', {\n            params: {\n                id,\n            },\n        });\n    };\n\n    create = (data: ArticleCreateRequest) => {\n\n        return request<VoidResponse>(`/admin/article/add`, 'POST', {\n            data,\n        });\n    };\n    edit = (data: ArticleEditRequest) => {\n        return request<VoidResponse>(`/admin/article/edit`, 'POST', {\n            data,\n        });\n    };\n\n    delete = (id: number) => {\n        return request<void>(`/admin/article/del`, 'POST', {\n            data: {\n                id,\n            },\n        });\n    };\n\n    publish = (id: number) => {\n        return request<void>(`/admin/article/publish`, 'POST', {\n            params: {\n                id,\n            },\n        });\n    };\n    withdraw = (id: number) => {\n        return request<void>(`/admin/article/withdraw`, 'POST', {\n            params: {\n                id,\n            },\n        });\n    };\n}\n\nexport default new ArticleDataService();","import { request } from '../utils';\nimport { ArticleTypeCreateRequest, ArticleTypeEditRequest, ArticleTypeListResponse } from '../models';\n\nclass ArticleTypeDataService {\n    getList = (category: number) => {\n        return request<ArticleTypeListResponse>(`/admin/article/type/list`, 'GET', {\n            params: {\n                category,\n            },\n        });\n    };\n\n    creat = (data: ArticleTypeCreateRequest) => {\n        return request<void>(`/admin/article/type/add`, 'POST', {\n            data,\n        });\n    };\n    edit = (data: ArticleTypeEditRequest) => {\n        return request<void>(`/admin/article/type/edit`, 'POST', {\n            data,\n        });\n    };\n\n    delete = (id: number) => {\n        return request<void>(`/admin/article/type/del`, 'POST', {\n            data: {\n                id,\n            },\n        });\n    };\n}\n\nexport default new ArticleTypeDataService();","import { postFormData } from '../utils';\nimport { FileUploadResponse } from '../models';\nimport { Observable } from 'rxjs';\n\nclass FileUploadService {\n    postImage: (form: FormData) => Observable<FileUploadResponse> = (form) => {\n        return postFormData<FileUploadResponse>(`/admin/upload/image`, form);\n    }\n\n    postVideo = (form) => {\n        return postFormData<FileUploadResponse>(`/admin/upload/video`, form);\n    }\n}\n\nexport default new FileUploadService();","import { filter, Observable, Subject } from 'rxjs';\n\nclass ActionService {\n    private actionSubject = new Subject<string>();\n\n    save = (): void => {\n        this.actionSubject.next('save');\n    };\n\n    publish = (): void => {\n        this.actionSubject.next('publish');\n    };\n    withdraw = (): void => {\n        this.actionSubject.next('withdraw');\n    };\n\n    handleAction = (action: string): Observable<string> => {\n        return this.actionSubject.pipe(filter(x => x === action));\n    };\n}\n\nexport default new ActionService();","import { request } from '../utils';\nimport { LoginResponse } from '../models';\nimport MD5 from 'crypto-js/md5';\n\nclass LoginService {\n    signIn = ({ email, password, code }) => {\n        const encryptPwd = MD5(password).toString();\n\n        return request<LoginResponse>(`/admin/login`, 'POST', {\n            data: {\n                email,\n                password: encryptPwd,\n                code,\n            },\n        });\n    };\n    signOut = () => {\n        return request<void>(`/admin/logout`, 'GET');\n    };\n}\n\nexport default new LoginService();\n","import { BehaviorSubject, filter, map, Observable } from 'rxjs';\nimport { ReactElement, ReactNode } from 'react';\n\nclass PortalMessageService {\n    private _portalMessageSubject = new BehaviorSubject<{ type: string, body: ReactElement | ReactNode }>(null);\n\n    publish(message: { type: string, body: ReactElement | ReactNode }): void {\n        this._portalMessageSubject.next(message);\n    }\n\n    onMessage(type): Observable<ReactElement | ReactNode> {\n        return this._portalMessageSubject.pipe(filter(x => x?.type === type), map(x => x.body));\n    }\n}\n\nexport default new PortalMessageService();","import { request } from \"../utils\";\nimport { UserInfoResponse } from \"../models\";\n\nclass UserService {\n    getUserInfo = () => {\n        return request<UserInfoResponse>(`/admin/self/user/info`, \"GET\", null, true);\n    };\n}\n\nexport default new UserService();\n","import React, { useEffect } from 'react';\nimport { PortalMessageService } from '../../services';\n\nexport const Portal: React.FC<{ channel: string }> = ({ children, channel }) => {\n    useEffect(() => {\n        PortalMessageService.publish({\n            type: channel,\n            body: children,\n        });\n    }, [children, channel]);\n\n    return null;\n};\n\nexport const CHANNEL_APP_BAR_TITLE = 'appBarTitle';\n","import React, { useEffect, useState } from 'react';\nimport { Button, IconButton, styled, Toolbar, Typography } from '@mui/material';\nimport MuiAppBar, { AppBarProps as MuiAppBarProps } from '@mui/material/AppBar';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport { LoginService, PortalMessageService } from '../services';\nimport { CHANNEL_APP_BAR_TITLE } from '../components/portal';\n\ninterface AppBarProps extends MuiAppBarProps {\n    open?: boolean;\n}\n\nconst StyleAppBar = styled(MuiAppBar, {\n    shouldForwardProp: (prop) => prop !== 'open',\n})<AppBarProps>(({ theme, open }) => ({\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n    }),\n    ...(open && {\n        marginLeft: '200px',\n        // width: `calc(100% - 240px)`,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    }),\n}));\n\nexport const AppBar: React.FC<{ open; toggleDrawer }> = ({ open, toggleDrawer }) => {\n    const [title, setTitle] = useState(null);\n\n    useEffect(() => {\n        const titleSubscription = PortalMessageService.onMessage(CHANNEL_APP_BAR_TITLE).subscribe((newTitle) => {\n            setTitle(newTitle);\n        });\n\n        return () => {\n            titleSubscription.unsubscribe();\n        };\n    }, []);\n\n    const handleSignOut = () => {\n        LoginService.signOut().subscribe({\n            next: () => {\n                window.location.reload();\n            }\n        });\n    }\n\n    return (\n        <StyleAppBar position='absolute' open={open}>\n            <Toolbar\n                sx={{\n                    pr: '24px', // keep right padding when drawer closed\n                }}>\n                <IconButton\n                    edge='start'\n                    color='inherit'\n                    aria-label='open drawer'\n                    onClick={toggleDrawer}\n                    sx={{\n                        marginRight: '36px',\n                        // ...(open && { display: 'none' }),\n                    }}>\n                    <MenuIcon />\n                </IconButton>\n                <Typography component='h1' variant='h6' color='inherit' noWrap sx={{ flexGrow: 1 }}>\n                    {title}\n                </Typography>\n\n                <Button onClick={handleSignOut} sx={{ color: '#fff' }} variant=\"text\">\n                    注销\n                </Button>\n            </Toolbar>\n        </StyleAppBar>\n    );\n};\n","import React from \"react\";\nimport {\n    Divider,\n    List, ListItem, ListItemIcon,\n    ListItemText,\n    styled\n} from \"@mui/material\";\nimport MuiDrawer from \"@mui/material/Drawer\";\nimport WidgetsIcon from '@mui/icons-material/Widgets';\nimport TrendingUpIcon from '@mui/icons-material/TrendingUp';\nimport AnalyticsIcon from '@mui/icons-material/Analytics';\nimport ApiIcon from '@mui/icons-material/Api';\nimport SettingsIcon from \"@mui/icons-material/Settings\";\nimport { Link } from \"react-router-dom\";\n\nconst drawerWidth = 200;\n\nconst openedMixin = (theme) => ({\n    width: drawerWidth,\n    marginTop: '64px',\n    transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen\n    }),\n    overflowX: \"hidden\"\n});\n\nconst closedMixin = (theme) => ({\n    transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen\n    }),\n    marginTop: '64px',\n    overflowX: \"hidden\",\n    width: `calc(${theme.spacing(6)} + 1px)`,\n    [theme.breakpoints.up(\"sm\")]: {\n        width: `calc(${theme.spacing(7)} + 1px)`\n    }\n});\n\nexport const DrawerHeader = styled(\"div\")(({ theme }) => ({\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(-1, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar\n}));\n\nconst Drawer = styled(MuiDrawer)(\n  ({ theme, open }) => ({\n      width: drawerWidth,\n      flexShrink: 0,\n      whiteSpace: \"nowrap\",\n      boxSizing: \"border-box\",\n      ...(open && {\n          width: drawerWidth,\n          transition: theme.transitions.create(\"width\", {\n              easing: theme.transitions.easing.sharp,\n              duration: theme.transitions.duration.enteringScreen\n          }),\n          overflowX: \"hidden\",\n          \"& .MuiDrawer-paper\": openedMixin(theme)\n      }),\n      ...(!open && {\n          transition: theme.transitions.create(\"width\", {\n              easing: theme.transitions.easing.sharp,\n              duration: theme.transitions.duration.leavingScreen\n          }),\n          overflowX: \"hidden\",\n          width: `calc(${theme.spacing(7)} + 1px)`,\n          [theme.breakpoints.up(\"sm\")]: {\n              width: `calc(${theme.spacing(9)} + 1px)`\n          },\n          \"& .MuiDrawer-paper\": closedMixin(theme)\n      })\n  })\n);\n\nexport const AppMenu: React.FC<{ open; toggleDrawer }> = ({ open, toggleDrawer }) => {\n\n    return <Drawer variant=\"permanent\" open={open}>\n{/*\n        <DrawerHeader>\n            <IconButton onClick={toggleDrawer}>\n                <ChevronLeftIcon />\n            </IconButton>\n        </DrawerHeader>\n*/}\n        <Divider />\n        <List>\n            <div>\n                {/*<ListSubheader inset>稿件管理</ListSubheader>*/}\n                <Link to={\"/admin/products\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <WidgetsIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"产品中心\" />\n                    </ListItem>\n                </Link>\n\n\n                <Link to={\"/admin/applications\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <TrendingUpIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"行业应用\" />\n                    </ListItem>\n                </Link>\n\n                <Link to={\"/admin/news\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <AnalyticsIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"新闻中心\" />\n                    </ListItem>\n                </Link>\n\n                <Link to={\"/admin/others\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <ApiIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"其他\" />\n                    </ListItem>\n                </Link>\n            </div>\n        </List>\n        <Divider />\n        <List>\n            <div>\n\n                <Link to={\"/admin/settings\"}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <SettingsIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"稿件类型管理\" />\n                    </ListItem>\n                </Link>\n            </div>\n        </List>\n    </Drawer>;\n};","import React, { FC, Fragment, useState } from \"react\";\nimport { Box, Container, Paper } from \"@mui/material\";\n\nimport { AppBar } from \"./app-bar\";\nimport { AppMenu, DrawerHeader } from \"./menu\";\n\nexport const AuthLayout: FC = ({ children }) => {\n    const [openDrawer, setOpenDrawer] = useState(true);\n\n    const toggleDrawer = () => {\n        setOpenDrawer(!openDrawer);\n    };\n\n    return (\n      <Fragment>\n          <AppBar open={openDrawer} toggleDrawer={toggleDrawer} />\n          <AppMenu open={openDrawer} toggleDrawer={toggleDrawer} />\n          <Box\n            component=\"main\"\n            sx={{\n                flexGrow: 1,\n                height: \"100vh\",\n                overflow: \"auto\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                marginLeft: \"64px\",\n                transition: (theme) => theme.transitions.create(\"width\", {\n                    easing: theme.transitions.easing.sharp,\n                    duration: theme.transitions.duration.leavingScreen\n                }),\n                ...(openDrawer && {\n                    marginLeft: \"200px\",\n                    transition: (theme) => theme.transitions.create(\"width\", {\n                        easing: theme.transitions.easing.sharp,\n                        duration: theme.transitions.duration.enteringScreen\n                    })\n                })\n            }}>\n              <DrawerHeader />\n              <Container maxWidth=\"lg\">\n                  <Paper sx={{ mt: 4, mb: 4, height: \"100%\" }}>\n                      {children}\n                  </Paper>\n              </Container>\n          </Box>\n      </Fragment>\n    );\n};\n","import { Box } from '@mui/material';\nimport React from 'react';\n\nexport const PublicLayout: React.FC = (props) => {\n    return <Box\n        sx={{\n            // marginTop: 8,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n        }}\n    >\n        {props.children}\n    </Box>;\n};","import React, { useEffect, useRef } from 'react';\nimport { IconButton, InputProps, styled, TextField } from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport { FilterModel } from '../../models';\nimport { debounceTime, Subject, tap } from 'rxjs';\n\nconst InlineSearchBox = styled('div')(({ theme }) => ({\n    padding: theme.spacing(0.5, 0.5, 0),\n    justifyContent: 'space-between',\n    display: 'flex',\n    alignItems: 'flex-start',\n    flexWrap: 'wrap',\n    '& MuiTextField-root': {\n        [theme.breakpoints.down('xs')]: {\n            width: '100%',\n        },\n        margin: theme.spacing(1, 0.5, 1.5),\n        '& .MuiSvgIcon-root': {\n            marginRight: theme.spacing(0.5),\n        },\n        '& .MuiInput-underline:before': {\n            borderBottom: `1px solid ${theme.palette.divider}`,\n        },\n    },\n}));\n\nconst filterSubject = new Subject();\n\nexport const QuickFilterToolbar: React.FC<QuickFilterToolbarProps> = (props) => {\n        const inputRef = useRef(null);\n        const clearFilter = () => {\n            inputRef.current.value = '';\n            filterSubject.next('');\n        }\n        const onChange = (e) => {\n            filterSubject.next(e?.target.value);\n        }\n\n        useEffect(() => {\n            const filterSubscription = filterSubject.pipe(debounceTime(1500), tap((value) => {\n                props.setFilter((filter) => ({ ...filter, kw: value, offset: 0 }));\n            })).subscribe();\n\n            return () => {\n                filterSubscription.unsubscribe();\n            };\n        }, [props]);\n\n        return (\n            <InlineSearchBox>\n                <TextField\n                    inputRef={inputRef}\n                    variant='standard'\n                    defaultValue={props.value}\n                    onChange={onChange}\n                    placeholder='关键字查找'\n                    InputProps={{\n                        startAdornment: <SearchIcon fontSize='small' />,\n                        endAdornment: (\n                            <IconButton\n                                title='Clear'\n                                aria-label='Clear'\n                                size='small'\n                                style={{ visibility: props.value ? 'visible' : 'hidden' }}\n                                onClick={clearFilter}\n                            >\n                                <ClearIcon fontSize='small' />\n                            </IconButton>\n                        ),\n                    }}\n                />\n            </InlineSearchBox>\n        );\n    }\n;\n\ninterface QuickFilterToolbarProps extends InputProps {\n    setFilter: (filterState) => Partial<FilterModel>,\n};","import React from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\n\nexport interface ConfirmDeleteDialogProps {\n    open: boolean,\n    message?: string,\n    onClose?: () => void,\n    onConfirm?: () => void,\n}\n\nexport const ConfirmDeleteDialog: React.FC<ConfirmDeleteDialogProps> = ({ open, message, onClose, onConfirm }) => {\n\n    return <Dialog\n        maxWidth='xs'\n        open={open}\n    >\n        <DialogTitle>确认删除</DialogTitle>\n        <DialogContent dividers>\n            {message && <DialogContentText>\n                确认删除?\n            </DialogContentText>}\n        </DialogContent>\n        <DialogActions>\n            <Button autoFocus onClick={onClose}>\n                取消\n            </Button>\n            <Button color='warning' onClick={onConfirm}>确认</Button>\n        </DialogActions>\n    </Dialog>;\n\n};","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderCellParams, GridRowModel } from '@mui/x-data-grid';\n\nimport { ArticleDataService } from '../../services';\nimport { Article, ArticleFilter } from '../../models';\nimport { Box, Fab, IconButton, Typography } from '@mui/material';\nimport { QuickFilterToolbar } from '../../components/table';\nimport AddIcon from '@mui/icons-material/Add';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useHistory } from 'react-router';\nimport { tap } from 'rxjs';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\nimport { useSnackbar } from 'notistack';\nimport { Link } from 'react-router-dom';\n\nexport const Products: React.FC = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 1 });\n    const [dataSource, setDataSource] = useState<Article[]>([]);\n    const [totalSize, setTotalSize] = useState<number>(1);\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({ open: false });\n\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleDataService.getList(filter).subscribe({\n            next: ({ errcode, data }) => {\n                if (errcode === 0) {\n                    setDataSource(data.list);\n                    setTotalSize(data.total);\n                } else {\n                    console.error('fetch products error', errcode);\n                    snackBar.enqueueSnackbar('获取产品列表失败', {\n                        variant: 'error',\n                    });\n                }\n            }, error: (err) => {\n                console.error('fetch products error', err);\n                snackBar.enqueueSnackbar('获取产品列表失败', {\n                    variant: 'error',\n                });\n            },\n        });\n    }, [filter, snackBar]);\n\n    function confirmDelete(item: GridRowModel) {\n        setDeleteDialog({\n            open: true, message: `确认删除产品信息: \"${item.title}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm: function(): void {\n                ArticleDataService.delete(item.id).pipe(\n                    tap(() => {\n                        setFilter({ ...filter });\n                        setDeleteDialog({ open: false });\n\n                        snackBar.enqueueSnackbar('删除产品成功', {\n                            variant: 'success',\n                        });\n                    }),\n                ).subscribe({\n                    error: (err) => {\n                        snackBar.enqueueSnackbar(' 删除产品失败', {\n                            variant: 'error',\n                        });\n                    },\n                });\n            },\n        });\n\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '稿件Id',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => (\n                <Link to={`/admin/products/detail/${params.value}`}>{params.value}</Link>),\n        },\n        {\n            field: 'title',\n            headerName: '标题',\n            flex: 1,\n            sortable: false,\n        },\n        {\n            field: 'type_id',\n            headerName: '类型',\n            sortable: false,\n            renderCell: (params) => (\n                <Typography>{params.row.type?.name ?? ''}</Typography>\n            ),\n        },\n        {\n            field: 'status',\n            headerName: '状态',\n            sortable: false,\n            renderCell: (params) => (\n                <Typography>{params.value === 0 ? '草稿' : '已发布'}</Typography>\n            ),\n        },\n        {\n            field: 'read_cnt',\n            headerName: '阅读次数',\n            sortable: false,\n        },\n        {\n            field: 'created_at',\n            headerName: '创建时间',\n            flex: 1,\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <>\n                        <IconButton component={Link} to={`/admin/products/detail/${params.row.id}`}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => confirmDelete(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    function createItem() {\n        history.push('/admin/products/create');\n    }\n\n    return (\n        <Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={totalSize}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: QuickFilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        value: filter.kw,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={dataSource}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={createItem}\n            >\n                <AddIcon />\n            </Fab>\n            <ConfirmDeleteDialog {...deleteDialog} />\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>\n                产品中心\n            </Portal>\n        </Box>\n    );\n};\n","import { lastValueFrom, Subscription } from \"rxjs\";\nimport { FileUploadService } from \"../../services\";\n\nexport const uploadVideo = (file) => {\n  const formData = new FormData();\n\n  formData.append(\"file\", file);\n  return Promise.resolve(\n    lastValueFrom(FileUploadService.postVideo(formData)).then((resp) => {\n      if (resp.errcode !== 0) {\n        return {\n          url:\n            \"https://33333.cdn.cke-cs.com/rc1DFuFpHqcR3Mah6y0e/images/a941c59ff780060b51d398434c99fe9f229615b4227f5434.png\",\n        };\n      }\n      return { url: resp.data.url };\n    })\n  ).catch(() => {\n    return {\n      url:\n        \"https://33333.cdn.cke-cs.com/rc1DFuFpHqcR3Mah6y0e/images/a941c59ff780060b51d398434c99fe9f229615b4227f5434.png\",\n    };\n  });\n};\n\nclass VideoUploadAdapter {\n  private loader: any;\n  private _uploadTask: Subscription;\n\n  constructor(loader) {\n    this.loader = loader;\n  }\n\n  upload() {\n    return this.loader.file.then(uploadVideo);\n  }\n\n  abort() {\n    return Promise.reject();\n  }\n}\n\nexport function VideoUploadAdapterPlugin(editor) {\n  editor.plugins.get(\"FileRepository\").createUploadAdapter = (loader) => {\n    return new VideoUploadAdapter(loader);\n  };\n}\n","import { FileUploadService } from \"../../services\";\nimport { lastValueFrom, Subscription } from \"rxjs\";\n\nexport const uploadImage = (file) => {\n  const formData = new FormData();\n\n  formData.append(\"file\", file);\n  return Promise.resolve(\n    lastValueFrom(FileUploadService.postImage(formData)).then((resp) => {\n      if (resp.errcode !== 0) {\n        return {\n          url:\n            \"https://33333.cdn.cke-cs.com/rc1DFuFpHqcR3Mah6y0e/images/a941c59ff780060b51d398434c99fe9f229615b4227f5434.png\",\n        };\n      }\n      return { url: resp.data.url };\n    })\n  ).catch(() => {\n    return {\n      url:\n        \"https://33333.cdn.cke-cs.com/rc1DFuFpHqcR3Mah6y0e/images/a941c59ff780060b51d398434c99fe9f229615b4227f5434.png\",\n    };\n  });\n};\n\nclass MyUploadAdapter {\n  private loader: any;\n  private _uploadTask: Subscription;\n\n  constructor(loader) {\n    this.loader = loader;\n  }\n\n  upload = () => {\n    return this.loader.file.then(uploadImage);\n  };\n\n  abort = () => {\n    this._uploadTask.unsubscribe();\n  };\n}\n\nexport function UploadAdaptorPlugin(editor) {\n  editor.plugins.get(\"FileRepository\").createUploadAdapter = (loader) => {\n    return new MyUploadAdapter(loader);\n  };\n}\n","import { uploadVideo } from './upload-video-adaptor-plugin';\nimport { uploadImage } from './upload-adaptor-plugin';\n\nexport const CKEditorConfig = {\n    videoUpload: uploadVideo,\n    imageUpload: uploadImage,\n    mediaEmbed: {\n        extraProviders: [\n            {\n                name: 'embed-media',\n                url: [/(.*?)/],\n                html: (match) => {\n                    const src = match.input;\n                    return (\n                        '<div style=\"position: relative; padding-bottom: 100%; height: 0; pointer-events: auto;\">' +\n                        '<video controls style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" src=\"' +\n                        src +\n                        '\">' +\n                        '</video>' +\n                        '</div>'\n                    );\n                },\n            },\n        ],\n    },\n    toolbar: {\n        items: [\n            'heading',\n            '|',\n            'bold',\n            'italic',\n            'underline',\n            'fontBackgroundColor',\n            'fontColor',\n            'fontSize',\n            'fontFamily',\n            'link',\n            'insertTable',\n            'imageUpload',\n            'mediaEmbed',\n            // 'CKFinder',\n            'bulletedList',\n            'numberedList',\n            'removeFormat',\n            '|',\n            'alignment',\n            'indent',\n            'outdent',\n            '|',\n            'blockQuote',\n            'undo',\n            'redo',\n            'code',\n            'codeBlock',\n            'highlight',\n            'exportPdf',\n            'specialCharacters',\n            'horizontalLine',\n            'MathType',\n            'ChemType',\n            'strikethrough',\n            'subscript',\n            'superscript',\n            'todoList',\n            'restrictedEditingException',\n        ]\n    },\n};","import React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n    Box,\n    Button,\n    Grid,\n    IconButton,\n    ImageList,\n    ImageListItem,\n    ImageListItemBar,\n    MenuItem,\n    Paper,\n    TextField,\n    Typography,\n} from '@mui/material';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { Article, ArticleType, ArticleTypeListResponse } from '../../../models';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@xccjh/xccjh-ckeditor5-video-file-upload';\nimport { ActionService, ArticleDataService, ArticleTypeDataService, FileUploadService } from '../../../services';\nimport { switchMap } from 'rxjs';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\nimport { CKEditorConfig } from '../../../components/editor';\n\nexport const EditForm: React.FC<{ detail: Article }> = ({ detail }) => {\n    const [formDetail, setFormDetail] = useState<Article>(detail);\n    const [categoryList, setCategoryList] = useState<ArticleType[]>([]);\n    const [selectedRootCategory, setSelectedRootCategory] = useState<ArticleType>(null);\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        setFormDetail(detail);\n    }, [detail]);\n\n    useEffect(() => {\n        ArticleTypeDataService.getList(1).subscribe({\n            next: (resp: ArticleTypeListResponse) => {\n                const categoryList = resp.data.list;\n                setCategoryList(categoryList);\n            },\n            error: (err) => {\n                console.error('fail to fetch article type list', err);\n                snackBar.enqueueSnackbar('获取产品类型信息失败', {\n                    variant: 'error',\n                });\n            },\n        });\n    }, [snackBar]);\n    useEffect(() => {\n        if (formDetail.type_id >= 0) {\n            const selectedRootCategory = categoryList.find((x) => x.id === formDetail.type?.parent_id);\n            setSelectedRootCategory(selectedRootCategory);\n        }\n    }, [categoryList, formDetail.type_id, formDetail.type]);\n\n    useEffect(() => {\n        const saveAction = ActionService.handleAction('save')\n            .pipe(\n                switchMap(() => {\n                    return !formDetail.id\n                        ? ArticleDataService.create({\n                              category: 1,\n                              content: formDetail.content,\n                              summary: formDetail.summary,\n                              title: formDetail.title,\n                              type_id: formDetail.type_id,\n                              covers: formDetail.covers.map((x) => x.img),\n                          })\n                        : ArticleDataService.edit({\n                              content: formDetail.content,\n                              id: formDetail.id,\n                              summary: formDetail.summary,\n                              title: formDetail.title,\n                              type_id: formDetail.type_id,\n                              covers: formDetail.covers.map((x) => x.img),\n                          });\n                })\n            )\n            .subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        history.push('/admin/products');\n                        snackBar.enqueueSnackbar('保存产品信息成功', {\n                            variant: 'success',\n                        });\n                    } else {\n                        console.error('fail to save product', resp.errmessage);\n                        snackBar.enqueueSnackbar('保存产品失败', {\n                            variant: 'error',\n                        });\n                    }\n                },\n                error: (error) => {\n                    console.error('fail to save product', error);\n                    snackBar.enqueueSnackbar('保存产品失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n\n        return () => {\n            saveAction.unsubscribe();\n        };\n    }, [formDetail, snackBar, history]);\n\n    const rootCategoryList: () => ArticleType[] = () => {\n        return categoryList.filter((x) => !x.parent_id);\n    };\n    const childCategoryList: () => ArticleType[] = () => {\n        return !selectedRootCategory ? [] : categoryList.filter((x) => x.parent_id === selectedRootCategory.id);\n    };\n\n    function updateInputValue(key: string): (e: ChangeEvent<HTMLInputElement>) => void {\n        return (e) => {\n            const value = e.target.value;\n            setFormDetail((state) => ({\n                ...state,\n                [key]: value,\n            }));\n        };\n    }\n\n    function handleRootCategoryChange(e) {\n        const targetCategory = categoryList.find((x) => x.id === e.target.value);\n        setSelectedRootCategory(targetCategory);\n    }\n\n    function handleChildCategoryChange(e) {\n        const targetCategory = categoryList.find((x) => x.id === e.target.value);\n        setFormDetail((state) => ({\n            ...state,\n            type: targetCategory,\n            type_id: targetCategory.id,\n        }));\n    }\n\n    function handleCoverUpload(e) {\n        const files = e.target.files;\n        if (files && files.length > 0) {\n            const formData = new FormData();\n            formData.append('file', files[0]);\n\n            FileUploadService.postImage(formData).subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        setFormDetail((state) => {\n                            const covers = state.covers ?? [];\n                            covers.push({\n                                id: -Math.ceil(Math.random() * 1000),\n                                article_id: formDetail.id,\n                                img: resp.data.url,\n                            });\n\n                            return {\n                                ...state,\n                                covers,\n                            };\n                        });\n                    } else {\n                        console.error('fail to upload image', resp.errmessage);\n                        snackBar.enqueueSnackbar(' 上传封面失败', {\n                            variant: 'error',\n                        });\n                    }\n                },\n                error: (err) => {\n                    console.error('fail to upload image', err);\n                    snackBar.enqueueSnackbar(' 上传封面失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n        }\n    }\n\n    function handleDeleteCover(coverIndex): void {\n        setFormDetail((state) => {\n            const covers = state.covers ?? [];\n            covers.splice(coverIndex, 1);\n\n            return {\n                ...state,\n                covers,\n            };\n        });\n    }\n\n    function handleContentUpdate(event, editor): void {\n        const rawContent = editor.getData();\n\n        setFormDetail((state) => ({\n            ...state,\n            content: rawContent,\n        }));\n        console.log('editor update >>>', rawContent);\n    }\n\n    function clearSelectedFile(e) {\n        e.target.value = null;\n    }\n\n    return (\n        <Box sx={{ '& .MuiTextField-root': { mt: 1, mb: 1 } }} component='form'>\n            <Grid container>\n                <Grid item xs={12}>\n                    <TextField\n                        select\n                        sx={{ minWidth: '200px', mr: 1 }}\n                        id='product-category-root'\n                        label='产品类型'\n                        value={selectedRootCategory?.id ?? ''}\n                        onChange={handleRootCategoryChange}>\n                        {rootCategoryList().map((x) => {\n                            return (\n                                <MenuItem key={`cate-${x.id}`} value={x.id}>\n                                    {x.name}\n                                </MenuItem>\n                            );\n                        })}\n                    </TextField>\n                    <TextField\n                        select\n                        sx={{ minWidth: '200px' }}\n                        id='product-category-child'\n                        onChange={handleChildCategoryChange}\n                        value={formDetail.type_id > 0 ? formDetail.type_id : ''}\n                        label='子类型'>\n                        {childCategoryList().map((x) => {\n                            return (\n                                <MenuItem key={x.id} value={x.id}>\n                                    {x.name}\n                                </MenuItem>\n                            );\n                        })}\n                    </TextField>\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField\n                        fullWidth\n                        label='标题'\n                        value={formDetail?.title ?? ''}\n                        onChange={updateInputValue('title')}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField\n                        fullWidth\n                        label='摘要'\n                        rows='4'\n                        value={formDetail?.summary ?? ''}\n                        onChange={updateInputValue('summary')}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                        <Grid container>\n                            <Grid item xs={1}>\n                                <Typography variant='subtitle1'>封面</Typography>\n                            </Grid>\n                            <Grid item container xs justifyContent='flex-end'>\n                                <label htmlFor='upload-cover'>\n                                    <input\n                                        style={{ display: 'none' }}\n                                        accept='image/*'\n                                        id='upload-cover'\n                                        type='file'\n                                        onChange={handleCoverUpload}\n                                        onClick={clearSelectedFile}\n                                    />\n                                    <Button variant='contained' component='span'>\n                                        添加封面\n                                    </Button>\n                                </label>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <ImageList sx={{ minHeight: '160px', width: '100%' }} cols={5} rowHeight={164}>\n                                    {formDetail.covers?.map((item, index) => (\n                                        <ImageListItem key={item.id}>\n                                            <img src={`${item.img}`} srcSet={`${item.img}`} loading='lazy' alt={''} />\n                                            <ImageListItemBar\n                                                position='top'\n                                                actionPosition='right'\n                                                actionIcon={\n                                                    <IconButton\n                                                        onClick={() => handleDeleteCover(index)}\n                                                        sx={{ color: 'red' }}>\n                                                        <CancelIcon />\n                                                    </IconButton>\n                                                }\n                                            />\n                                        </ImageListItem>\n                                    )) ?? <div />}\n                                </ImageList>\n                            </Grid>\n                        </Grid>\n                    </Paper>\n                </Grid>\n                <Grid item container xs={12}>\n                    <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                        <Grid container>\n                            <Grid item xs={1}>\n                                <Typography variant='subtitle1'>内容</Typography>\n                            </Grid>\n                            <Grid\n                                item\n                                sx={{\n                                    height: '420px',\n                                    '& .ck-editor__main, & .ck-content': { height: '380px' },\n                                }}\n                                xs={12}>\n                                <CKEditor\n                                    config={CKEditorConfig}\n                                    editor={ClassicEditor}\n                                    data={formDetail.content}\n                                    onChange={handleContentUpdate}\n                                />\n                            </Grid>\n                        </Grid>\n                    </Paper>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n};\n","import React, { useState } from 'react';\nimport { Button } from '@mui/material';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport { ActionService } from '../../services';\n\nexport const ActionMenu: React.FC<{ status: number, isCreate: boolean }> = ({ status, isCreate }) => {\n    const [anchorEl, setAnchorEl] = useState(null);\n\n    function handleOpen(e) {\n        setAnchorEl(e.currentTarget);\n    }\n\n    function closeMenu() {\n        setAnchorEl(null);\n    }\n\n    function handleSave() {\n        ActionService.save();\n        closeMenu();\n    }\n\n    function handlePublish() {\n        ActionService.publish();\n        closeMenu();\n    }\n\n    function handleWithdraw() {\n        ActionService.withdraw();\n        closeMenu();\n    }\n\n    return <div>\n        <Button\n            id='action-button'\n            aria-controls='action-menu'\n            aria-haspopup='true'\n            aria-expanded={anchorEl ? 'true' : undefined}\n            variant='contained'\n            color={!status ? 'info' : 'success'}\n            disableElevation\n            onClick={handleOpen}\n            endIcon={<KeyboardArrowDownIcon />}\n        >\n            {isCreate ? '新增' : status === 0 ? '草稿' : '已发布'}\n        </Button>\n        <Menu\n            id='action-menu'\n            open={!!anchorEl}\n            anchorEl={anchorEl}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }} MenuListProps={{\n            'aria-labelledby': 'long-button',\n        }}\n            onClose={closeMenu}\n            PaperProps={{\n                style: {\n                    width: '160px',\n                },\n            }}\n        >\n            {\n                isCreate ?\n                    <MenuItem key='edit' onClick={handleSave}>\n                        保存\n                    </MenuItem>\n                    : [\n                        <MenuItem key='edit' onClick={handleSave}>\n                            保存\n                        </MenuItem>,\n                        <MenuItem key='publish' onClick={handlePublish}>\n                            发布\n                        </MenuItem>,\n                        <MenuItem key='withdraw' onClick={handleWithdraw}>\n                            撤稿\n                        </MenuItem>,\n                    ]\n            }\n        </Menu>\n    </div>;\n}\n","import React, { useEffect, useState } from 'react';\nimport { Article } from '../../../models';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { ActionService, ArticleDataService } from '../../../services';\nimport { Button, Grid } from '@mui/material';\n\nimport { EditForm } from '../components/edit-form';\nimport { ActionMenu } from '../../../components/form/action-menu';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../../components/portal';\nimport { useSnackbar } from 'notistack';\nimport { switchMap } from 'rxjs';\n\nexport const ProductDetail: React.FC = (props) => {\n    const [detail, setDetail] = useState<Article>({\n        id: 0,\n        category: 1,\n        content: '',\n        covers: [],\n        read_cnt: 0,\n        status: 0,\n        summary: '',\n        title: '',\n        type_id: -1,\n        created_at: '',\n        updated_at: '',\n    });\n\n    const snackBar = useSnackbar();\n    const history = useHistory();\n    const { params } = useRouteMatch<{ id: string }>();\n    const { id } = params;\n\n    useEffect(() => {\n        let actionSubscription = id\n            ? [\n                  ArticleDataService.getDetail(parseInt(id)).subscribe({\n                      next: (resp) => setDetail(resp.data.info),\n                      error: (err) => {\n                          console.error('fail to fetch product detail', err);\n                          snackBar.enqueueSnackbar(' 获取产品信息失败', {\n                              variant: 'error',\n                          });\n                      },\n                  }),\n\n                  ActionService.handleAction('withdraw')\n                      .pipe(switchMap(() => ArticleDataService.withdraw(parseInt(id))))\n                      .subscribe({\n                          next: () => {\n                              history.push('/admin/products');\n                              snackBar.enqueueSnackbar(' 撤稿成功', {\n                                  variant: 'success',\n                              });\n                          },\n                          error: (err) => {\n                              console.error('fail to publish', err);\n                              snackBar.enqueueSnackbar(' 撤稿失败', {\n                                  variant: 'error',\n                              });\n                          },\n                      }),\n                  ActionService.handleAction('publish')\n                      .pipe(switchMap(() => ArticleDataService.publish(parseInt(id))))\n                      .subscribe({\n                          next: () => {\n                              history.push('/admin/products');\n                              snackBar.enqueueSnackbar(' 发布成功', {\n                                  variant: 'success',\n                              });\n                          },\n                          error: (err) => {\n                              console.error('fail to publish', err);\n                              snackBar.enqueueSnackbar(' 发布失败', {\n                                  variant: 'error',\n                              });\n                          },\n                      }),\n              ]\n            : [];\n\n        return () => {\n            if (actionSubscription.length > 0) {\n                for (const subscription of actionSubscription) {\n                    subscription.unsubscribe();\n                }\n            }\n        };\n    }, [id, snackBar, history]);\n\n    function goBack() {\n        history.goBack();\n    }\n\n    return (\n        <>\n            <Grid container spacing={2} sx={{ pr: 2, pl: 1 }}>\n                <Grid container item xs={12}>\n                    <Grid item xs={1} sx={{ pl: 1 }}>\n                        <Button variant='outlined' onClick={goBack}>\n                            返回\n                        </Button>\n                    </Grid>\n                    <Grid item container justifyContent='flex-end' xs>\n                        <ActionMenu status={detail?.status} isCreate={detail?.id === 0} />\n                    </Grid>\n                </Grid>\n                <Grid item xs={12}>\n                    <EditForm detail={detail} />\n                </Grid>\n            </Grid>\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>产品中心</Portal>\n        </>\n    );\n};\n","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderCellParams, GridRowModel } from '@mui/x-data-grid';\nimport { useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport { ArticleDataService } from '../../services';\nimport { Article, ArticleFilter } from '../../models';\nimport { Box, Fab, IconButton, Typography } from '@mui/material';\nimport { QuickFilterToolbar } from '../../components/table';\nimport AddIcon from '@mui/icons-material/Add';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { tap } from 'rxjs';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\nimport { useSnackbar } from 'notistack';\n\nexport const Applications = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 2 });\n    const [dataSource, setDataSource] = useState<Article[]>([]);\n    const [totalSize, setTotalSize] = useState<number>(0);\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({ open: false });\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleDataService.getList(filter).subscribe({\n            next: ({ errcode, data }) => {\n                if (errcode === 0) {\n                    setDataSource(data.list);\n                    setTotalSize(data.total);\n                } else {\n                    console.error('fail to fetch application list', errcode);\n                    snackBar.enqueueSnackbar(' 获取行业应用列表失败', {\n                        variant: 'error',\n                    });\n                }\n            }, error: (err) => {\n                console.error('fail to fetch application list', err);\n                snackBar.enqueueSnackbar(' 获取行业应用列表失败', {\n                    variant: 'error',\n                });\n            },\n        });\n    }, [filter, snackBar]);\n\n    function confirmDelete(item: GridRowModel) {\n        setDeleteDialog({\n            open: true, message: `确认删除行业应用信息: \"${item.title}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm(): void {\n                ArticleDataService.delete(item.id).pipe(\n                    tap(() => {\n                        setFilter({ ...filter });\n                        setDeleteDialog({ open: false });\n\n                        snackBar.enqueueSnackbar(' 删除行业应用成功', {\n                            variant: 'success',\n                        });\n                    }),\n                ).subscribe({\n                    error: (err) => {\n                        console.error('fail to delete application', err);\n                        snackBar.enqueueSnackbar(' 删除行业应用失败', {\n                            variant: 'error',\n                        });\n                    },\n                });\n            },\n        });\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '稿件Id',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (<Link to={`/admin/applications/detail/${params.value}`}>{params.value}</Link>);\n            },\n        },\n        {\n            field: 'title',\n            headerName: '标题',\n            flex: 1,\n            sortable: false,\n        },\n        {\n            field: 'type_id',\n            headerName: '类型',\n            sortable: false,\n            renderCell: (params) => <Typography>{params.row.type?.name ?? ''}</Typography>,\n        },\n        {\n            field: 'status',\n            headerName: '状态',\n            sortable: false,\n            renderCell: (params) => <Typography>{params.value === 0 ? '草稿' : '已发布'}</Typography>,\n        },\n        {\n            field: 'read_cnt',\n            headerName: '阅读次数',\n            sortable: false,\n        },\n        {\n            field: 'created_at',\n            headerName: '创建时间',\n            flex: 1,\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <>\n                        <IconButton component={Link} to={`/admin/applications/detail/${params.row.id}`}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => confirmDelete(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    function createItem() {\n        history.push('/admin/applications/create');\n    }\n\n    return (<Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={totalSize}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: QuickFilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        value: filter.kw,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={dataSource}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={createItem}\n            >\n                <AddIcon />\n            </Fab>\n            <ConfirmDeleteDialog {...deleteDialog} />\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>\n                行业应用\n            </Portal>\n        </Box>\n    );\n};","import React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n    Box,\n    Button,\n    Grid,\n    IconButton,\n    ImageList,\n    ImageListItem,\n    ImageListItemBar,\n    MenuItem,\n    Paper,\n    TextField,\n    Typography,\n} from '@mui/material';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { Article, ArticleType, ArticleTypeListResponse } from '../../../models';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@xccjh/xccjh-ckeditor5-video-file-upload';\nimport { ActionService, ArticleDataService, ArticleTypeDataService, FileUploadService } from '../../../services';\nimport { switchMap } from 'rxjs';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\nimport { CKEditorConfig } from '../../../components/editor';\n\nexport const EditForm: React.FC<{ detail: Article }> = ({ detail }) => {\n    const [formDetail, setFormDetail] = useState<Article>(detail);\n    const [categoryList, setCategoryList] = useState<ArticleType[]>([]);\n\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleTypeDataService.getList(2).subscribe((resp: ArticleTypeListResponse) => {\n            const categoryList = resp.data.list;\n            setCategoryList(categoryList);\n        });\n    }, []);\n    useEffect(() => setFormDetail(detail), [detail]);\n\n    useEffect(() => {\n        const saveAction = ActionService.handleAction('save')\n            .pipe(\n                switchMap(() => {\n                    return !formDetail.id\n                        ? ArticleDataService.create({\n                              category: 2,\n                              content: formDetail.content,\n                              summary: formDetail.summary,\n                              title: formDetail.title,\n                              type_id: formDetail.type_id,\n                              covers: formDetail.covers.map((x) => x.img),\n                          })\n                        : ArticleDataService.edit({\n                              content: formDetail.content,\n                              id: formDetail.id,\n                              summary: formDetail.summary,\n                              title: formDetail.title,\n                              type_id: formDetail.type_id,\n                              covers: formDetail.covers.map((x) => x.img),\n                          });\n                })\n            )\n            .subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        history.push('/admin/applications');\n\n                        snackBar.enqueueSnackbar('  保存行业信息成功', {\n                            variant: 'success',\n                        });\n                    } else {\n                        console.error('fail to fetch application list', resp.errmessage);\n                        snackBar.enqueueSnackbar(' 保存行业信息失败', {\n                            variant: 'error',\n                        });\n                    }\n                },\n                error: (err) => {\n                    console.error('fail to fetch application list', err);\n                    snackBar.enqueueSnackbar(' 保存行业信息失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n\n        return () => {\n            saveAction.unsubscribe();\n        };\n    }, [formDetail, snackBar, history]);\n\n    function updateInputValue(key: string): (e: ChangeEvent<HTMLInputElement>) => void {\n        return (e) => {\n            const value = e.target.value;\n            setFormDetail((state) => ({\n                ...state,\n                [key]: value,\n            }));\n        };\n    }\n\n    function handleCategoryChange(e) {\n        const targetCategory = categoryList.find((x) => x.id === e.target.value);\n        setFormDetail((state) => ({\n            ...state,\n            type: targetCategory,\n            type_id: targetCategory.id,\n        }));\n    }\n\n    function handleCoverUpload(e) {\n        const files = e.target.files;\n        if (files && files.length > 0) {\n            const formData = new FormData();\n            formData.append('file', files[0]);\n\n            FileUploadService.postImage(formData).subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        setFormDetail((state) => {\n                            const covers = state.covers ?? [];\n                            covers.push({\n                                id: -Math.ceil(Math.random() * 1000),\n                                article_id: formDetail.id,\n                                img: resp.data.url,\n                            });\n\n                            return {\n                                ...state,\n                                covers,\n                            };\n                        });\n                    } else {\n                        console.error('fail to upload cover', resp.errmessage);\n                        snackBar.enqueueSnackbar(' 上传封面失败', {\n                            variant: 'error',\n                        });\n                    }\n                },\n                error: (err) => {\n                    console.error('fail to upload cover', err);\n                    snackBar.enqueueSnackbar(' 上传封面失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n        }\n    }\n\n    function handleDeleteCover(coverIndex): void {\n        setFormDetail((state) => {\n            const covers = state.covers ?? [];\n            covers.splice(coverIndex, 1);\n\n            return {\n                ...state,\n                covers,\n            };\n        });\n    }\n\n    function handleContentUpdate(event, editor): void {\n        const rawContent = editor.getData();\n\n        setFormDetail((state) => ({\n            ...state,\n            content: rawContent,\n        }));\n        console.log('editor update >>>', rawContent);\n    }\n\n    function clearSelectedFile(e) {\n        e.target.value = null;\n    }\n\n    return (\n        <Box sx={{ '& .MuiTextField-root': { mt: 1, mb: 1 } }} component='form'>\n            <Grid container>\n                <Grid item xs={12}>\n                    <TextField\n                        select\n                        sx={{ minWidth: '200px' }}\n                        id='application-category'\n                        onChange={handleCategoryChange}\n                        value={formDetail.type_id > 0 ? formDetail.type_id : ''}\n                        label='应用类型'>\n                        {categoryList.map((x) => {\n                            return (\n                                <MenuItem key={x.id} value={x.id}>\n                                    {x.name}\n                                </MenuItem>\n                            );\n                        })}\n                    </TextField>\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField fullWidth label='标题' value={formDetail.title} onChange={updateInputValue('title')} />\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField\n                        fullWidth\n                        label='摘要'\n                        rows='4'\n                        value={formDetail.summary}\n                        onChange={updateInputValue('summary')}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                        <Grid container>\n                            <Grid item xs={1}>\n                                <Typography variant='subtitle1'>封面</Typography>\n                            </Grid>\n                            <Grid item container xs justifyContent='flex-end'>\n                                <label htmlFor='upload-cover'>\n                                    <input\n                                        style={{ display: 'none' }}\n                                        accept='image/*'\n                                        id='upload-cover'\n                                        type='file'\n                                        onChange={handleCoverUpload}\n                                        onClick={clearSelectedFile}\n                                    />\n                                    <Button variant='contained' component='span'>\n                                        添加封面\n                                    </Button>\n                                </label>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <ImageList sx={{ minHeight: '160px', width: '100%' }} cols={5} rowHeight={164}>\n                                    {formDetail.covers?.map((item, index) => (\n                                        <ImageListItem key={item.id}>\n                                            <img src={`${item.img}`} srcSet={`${item.img}`} loading='lazy' alt={''} />\n                                            <ImageListItemBar\n                                                position='top'\n                                                actionPosition='right'\n                                                actionIcon={\n                                                    <IconButton\n                                                        onClick={() => handleDeleteCover(index)}\n                                                        sx={{ color: 'red' }}>\n                                                        <CancelIcon />\n                                                    </IconButton>\n                                                }\n                                            />\n                                        </ImageListItem>\n                                    )) ?? <div />}\n                                </ImageList>\n                            </Grid>\n                        </Grid>\n                    </Paper>\n                </Grid>\n                <Grid item container xs={12}>\n                    <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                        <Grid container>\n                            <Grid item xs={1}>\n                                <Typography variant='subtitle1'>内容</Typography>\n                            </Grid>\n                            <Grid\n                                item\n                                sx={{\n                                    height: '420px',\n                                    '& .ck-editor__main, & .ck-content': { height: '380px' },\n                                }}\n                                xs={12}>\n                                <CKEditor\n                                    config={CKEditorConfig}\n                                    editor={ClassicEditor}\n                                    data={formDetail.content}\n                                    onChange={handleContentUpdate}\n                                />\n                            </Grid>\n                        </Grid>\n                    </Paper>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n};\n","import React, { useEffect, useState } from 'react';\nimport { Article } from '../../../models';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { ActionService, ArticleDataService } from '../../../services';\nimport { Button, Grid } from '@mui/material';\n\nimport { EditForm } from '../components/edit-form';\nimport { ActionMenu } from '../../../components/form/action-menu';\nimport { useSnackbar } from 'notistack';\nimport { switchMap } from 'rxjs';\n\nexport const ApplicationDetail: React.FC = (props) => {\n    const [detail, setDetail] = useState<Article>({\n        id: 0,\n        category: 2,\n        content: '',\n        covers: [],\n        read_cnt: 0,\n        status: 0,\n        summary: '',\n        title: '',\n        type_id: -1,\n        created_at: '',\n        updated_at: '',\n    });\n\n    const snackBar = useSnackbar();\n    const history = useHistory();\n    const { params } = useRouteMatch<{ id: string }>();\n    const { id } = params;\n\n    useEffect(() => {\n        let actionSubscription = id\n            ? [\n                  ArticleDataService.getDetail(parseInt(id)).subscribe({\n                      next: (resp) => setDetail(resp.data.info),\n                      error: (err) => {\n                          console.error('fail to fetch application list', err);\n                          snackBar.enqueueSnackbar(' 获取应用详情失败', {\n                              variant: 'error',\n                          });\n                      },\n                  }),\n                  ActionService.handleAction('withdraw')\n                      .pipe(switchMap(() => ArticleDataService.withdraw(parseInt(id))))\n                      .subscribe({\n                          next: () => {\n                              history.push('/admin/applications');\n                              snackBar.enqueueSnackbar(' 撤稿成功', {\n                                  variant: 'success',\n                              });\n                          },\n                          error: (err) => {\n                              console.error('fail to publish', err);\n                              snackBar.enqueueSnackbar(' 撤稿失败', {\n                                  variant: 'error',\n                              });\n                          },\n                      }),\n                  ActionService.handleAction('publish')\n                      .pipe(switchMap(() => ArticleDataService.publish(parseInt(id))))\n                      .subscribe({\n                          next: () => {\n                              history.push('/admin/applications');\n                              snackBar.enqueueSnackbar(' 发布成功', {\n                                  variant: 'success',\n                              });\n                          },\n                          error: (err) => {\n                              console.error('fail to publish', err);\n                              snackBar.enqueueSnackbar(' 发布失败', {\n                                  variant: 'error',\n                              });\n                          },\n                      }),\n              ]\n            : [];\n\n        return () => {\n            if (actionSubscription.length > 0) {\n                for (const subscription of actionSubscription) {\n                    subscription.unsubscribe();\n                }\n            }\n        };\n    }, [id, snackBar, history]);\n\n    function goBack() {\n        history.goBack();\n    }\n\n    return (\n        <Grid container spacing={2} sx={{ pr: 2, pl: 1 }}>\n            <Grid container item xs={12}>\n                <Grid item xs={1} sx={{ pl: 1 }}>\n                    <Button variant='outlined' onClick={goBack}>\n                        返回\n                    </Button>\n                </Grid>\n                <Grid item container justifyContent='flex-end' xs>\n                    <ActionMenu status={detail?.status} isCreate={detail?.id === 0} />\n                </Grid>\n            </Grid>\n            <Grid item xs={12}>\n                <EditForm detail={detail} />\n            </Grid>\n        </Grid>\n    );\n};\n","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderCellParams, GridRowModel } from '@mui/x-data-grid';\nimport { useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport { ArticleDataService } from '../../services';\nimport { Article, ArticleFilter } from '../../models';\nimport { Box, Fab, IconButton, Typography } from '@mui/material';\nimport { QuickFilterToolbar } from '../../components/table';\nimport AddIcon from '@mui/icons-material/Add';\nimport { tap } from 'rxjs';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\nimport { useSnackbar } from 'notistack';\n\nexport const News = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 3 });\n    const [dataSource, setDataSource] = useState<Article[]>([]);\n    const [totalSize, setTotalSize] = useState<number>(0);\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({ open: false });\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleDataService.getList(filter).subscribe({\n            next: ({ errcode, data }) => {\n                if (errcode === 0) {\n                    setDataSource(data.list);\n                    setTotalSize(data.total);\n                } else {\n                    console.error('fail to fetch news list', errcode);\n                    snackBar.enqueueSnackbar(' 获取新闻列表失败', {\n                        variant: 'error',\n                    });\n                }\n            },\n            error: (err) => {\n                console.error('fail to fetch news list', err);\n                snackBar.enqueueSnackbar(' 获取新闻列表失败', {\n                    variant: 'error',\n                });\n            },\n        });\n    }, [filter, snackBar]);\n\n    function confirmDelete(item: GridRowModel) {\n        setDeleteDialog({\n            open: true,\n            message: `确认删除新闻信息: \"${item.title}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm(): void {\n                ArticleDataService.delete(item.id)\n                    .pipe(\n                        tap(() => {\n                            setFilter({ ...filter });\n                            setDeleteDialog({ open: false });\n\n                            snackBar.enqueueSnackbar(' 删除新闻成功', {\n                                variant: 'success',\n                            });\n                        })\n                    )\n                    .subscribe({\n                        error: (err) => {\n                            console.error('fail to delete news', err);\n                            snackBar.enqueueSnackbar(' 删除新闻失败', {\n                                variant: 'error',\n                            });\n                        },\n                    });\n            },\n        });\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '稿件Id',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return <Link to={`/admin/news/detail/${params.value}`}>{params.value}</Link>;\n            },\n        },\n        {\n            field: 'title',\n            headerName: '标题',\n            flex: 1,\n            sortable: false,\n        },\n        {\n            field: 'type_id',\n            headerName: '类型',\n            sortable: false,\n            renderCell: (params) => <Typography>{params.row.type?.name ?? ''}</Typography>,\n        },\n        {\n            field: 'status',\n            headerName: '状态',\n            sortable: false,\n            renderCell: (params) => <Typography>{params.value === 0 ? '草稿' : '已发布'}</Typography>,\n        },\n        {\n            field: 'read_cnt',\n            headerName: '阅读次数',\n            sortable: false,\n        },\n        {\n            field: 'created_at',\n            headerName: '创建时间',\n            flex: 1,\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <>\n                        <IconButton component={Link} to={`/admin/news/detail/${params.row.id}`}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => confirmDelete(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    function createItem() {\n        history.push('/admin/news/create');\n    }\n\n    return (\n        <Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={totalSize}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: QuickFilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        value: filter.kw,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={dataSource}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={createItem}>\n                <AddIcon />\n            </Fab>\n            <ConfirmDeleteDialog {...deleteDialog} />\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>新闻中心</Portal>\n        </Box>\n    );\n};\n","import React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n    Box,\n    Button,\n    Grid,\n    IconButton,\n    ImageList,\n    ImageListItem,\n    ImageListItemBar,\n    MenuItem,\n    Paper,\n    TextField,\n    Typography,\n} from '@mui/material';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { Article, ArticleType, ArticleTypeListResponse } from '../../../models';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@xccjh/xccjh-ckeditor5-video-file-upload';\nimport { ActionService, ArticleDataService, ArticleTypeDataService, FileUploadService } from '../../../services';\nimport { switchMap } from 'rxjs';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\nimport { CKEditorConfig } from '../../../components/editor';\n\nexport const EditForm: React.FC<{ detail: Article }> = ({ detail }) => {\n    const [formDetail, setFormDetail] = useState<Article>(detail);\n    const [categoryList, setCategoryList] = useState<ArticleType[]>([]);\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleTypeDataService.getList(3).subscribe((resp: ArticleTypeListResponse) => {\n            const categoryList = resp.data.list;\n            setCategoryList(categoryList);\n        });\n    }, []);\n    useEffect(() => setFormDetail(detail), [detail]);\n\n    useEffect(() => {\n        const saveAction = ActionService.handleAction('save')\n            .pipe(\n                switchMap(() => {\n                    return !formDetail.id\n                        ? ArticleDataService.create({\n                              category: 3,\n                              content: formDetail.content,\n                              summary: formDetail.summary,\n                              title: formDetail.title,\n                              type_id: formDetail.type_id,\n                              covers: formDetail.covers.map((x) => x.img),\n                          })\n                        : ArticleDataService.edit({\n                              content: formDetail.content,\n                              id: formDetail.id,\n                              summary: formDetail.summary,\n                              title: formDetail.title,\n                              type_id: formDetail.type_id,\n                              covers: formDetail.covers.map((x) => x.img),\n                          });\n                })\n            )\n            .subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        history.push('/admin/news');\n\n                        snackBar.enqueueSnackbar(' 保存新闻成功', {\n                            variant: 'success',\n                        });\n                    } else {\n                        console.error('fail to save news ', resp.errmessage);\n                        snackBar.enqueueSnackbar(' 保存新闻失败', {\n                            variant: 'error',\n                        });\n                    }\n                },\n                error: (err) => {\n                    console.error('fail to save news ', err);\n                    snackBar.enqueueSnackbar(' 保存新闻失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n\n        return () => {\n            saveAction.unsubscribe();\n        };\n    }, [formDetail, snackBar, history]);\n\n    function updateInputValue(key: string): (e: ChangeEvent<HTMLInputElement>) => void {\n        return (e) => {\n            const value = e.target.value;\n            setFormDetail((state) => ({\n                ...state,\n                [key]: value,\n            }));\n        };\n    }\n\n    function handleCategoryChange(e) {\n        const targetCategory = categoryList.find((x) => x.id === e.target.value);\n        setFormDetail((state) => ({\n            ...state,\n            type: targetCategory,\n            type_id: targetCategory.id,\n        }));\n    }\n\n    function handleCoverUpload(e) {\n        const files = e.target.files;\n        if (files && files.length > 0) {\n            const formData = new FormData();\n            formData.append('file', files[0]);\n\n            FileUploadService.postImage(formData).subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        setFormDetail((state) => {\n                            const covers = state.covers ?? [];\n                            covers.push({\n                                id: -Math.ceil(Math.random() * 1000),\n                                article_id: formDetail.id,\n                                img: resp.data.url,\n                            });\n\n                            return {\n                                ...state,\n                                covers,\n                            };\n                        });\n                    } else {\n                        console.error('fail to upload cover', resp.errmessage);\n                        snackBar.enqueueSnackbar(' 上传封面失败', {\n                            variant: 'error',\n                        });\n                    }\n                },\n                error: (err) => {\n                    console.error('fail to upload cover', err);\n                    snackBar.enqueueSnackbar(' 上传封面失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n        }\n    }\n\n    function handleDeleteCover(coverIndex): void {\n        setFormDetail((state) => {\n            const covers = state.covers ?? [];\n            covers.splice(coverIndex, 1);\n\n            return {\n                ...state,\n                covers,\n            };\n        });\n    }\n\n    function handleContentUpdate(event, editor): void {\n        const rawContent = editor.getData();\n\n        setFormDetail((state) => ({\n            ...state,\n            content: rawContent,\n        }));\n        console.log('editor update >>>', rawContent);\n    }\n\n    function clearSelectedFile(e) {\n        e.target.value = null;\n    }\n\n    return (\n        <Box sx={{ '& .MuiTextField-root': { mt: 1, mb: 1 } }} component='form'>\n            <Grid container>\n                <Grid item xs={12}>\n                    <TextField\n                        select\n                        sx={{ minWidth: '200px' }}\n                        id='news-category'\n                        onChange={handleCategoryChange}\n                        value={formDetail.type_id > 0 ? formDetail.type_id : ''}\n                        label='新闻类型'>\n                        {categoryList.map((x) => {\n                            return (\n                                <MenuItem key={x.id} value={x.id}>\n                                    {x.name}\n                                </MenuItem>\n                            );\n                        })}\n                    </TextField>\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField fullWidth label='标题' value={formDetail.title} onChange={updateInputValue('title')} />\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField\n                        fullWidth\n                        label='摘要'\n                        rows='4'\n                        value={formDetail.summary}\n                        onChange={updateInputValue('summary')}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                        <Grid container>\n                            <Grid item xs={1}>\n                                <Typography variant='subtitle1'>封面</Typography>\n                            </Grid>\n                            <Grid item container xs justifyContent='flex-end'>\n                                <label htmlFor='upload-cover'>\n                                    <input\n                                        style={{ display: 'none' }}\n                                        accept='image/*'\n                                        id='upload-cover'\n                                        type='file'\n                                        onChange={handleCoverUpload}\n                                        onClick={clearSelectedFile}\n                                    />\n                                    <Button variant='contained' component='span'>\n                                        添加封面\n                                    </Button>\n                                </label>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <ImageList sx={{ minHeight: '160px', width: '100%' }} cols={5} rowHeight={164}>\n                                    {formDetail.covers?.map((item, index) => (\n                                        <ImageListItem key={item.id}>\n                                            <img src={`${item.img}`} srcSet={`${item.img}`} loading='lazy' alt={''} />\n                                            <ImageListItemBar\n                                                position='top'\n                                                actionPosition='right'\n                                                actionIcon={\n                                                    <IconButton\n                                                        onClick={() => handleDeleteCover(index)}\n                                                        sx={{ color: 'red' }}>\n                                                        <CancelIcon />\n                                                    </IconButton>\n                                                }\n                                            />\n                                        </ImageListItem>\n                                    )) ?? <div />}\n                                </ImageList>\n                            </Grid>\n                        </Grid>\n                    </Paper>\n                </Grid>\n                <Grid item container xs={12}>\n                    <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                        <Grid container>\n                            <Grid item xs={1}>\n                                <Typography variant='subtitle1'>内容</Typography>\n                            </Grid>\n                            <Grid\n                                item\n                                sx={{\n                                    height: '420px',\n                                    '& .ck-editor__main, & .ck-content': { height: '380px' },\n                                }}\n                                xs={12}>\n                                <CKEditor\n                                    config={CKEditorConfig}\n                                    editor={ClassicEditor}\n                                    data={formDetail.content}\n                                    onChange={handleContentUpdate}\n                                />\n                            </Grid>\n                        </Grid>\n                    </Paper>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n};\n","import React, { useEffect, useState } from 'react';\nimport { Article } from '../../../models';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { ActionService, ArticleDataService } from '../../../services';\nimport { Button, Grid } from '@mui/material';\n\nimport { EditForm } from '../components/edit-form';\nimport { ActionMenu } from '../../../components/form/action-menu';\nimport { useSnackbar } from 'notistack';\nimport { switchMap } from 'rxjs';\n\nexport const NewsDetail: React.FC = (props) => {\n    const [detail, setDetail] = useState<Article>(\n        {\n            id: 0,\n            category: 3,\n            content: '',\n            covers: [],\n            read_cnt: 0,\n            status: 0,\n            summary: '',\n            title: '',\n            type_id: -1,\n            created_at: '',\n            updated_at: '',\n        },\n    );\n\n    const snackBar = useSnackbar();\n    const history = useHistory();\n    const { params } = useRouteMatch<{ id: string }>();\n    const { id } = params;\n\n    useEffect(() => {\n        let actionSubscription = id ? [\n            ArticleDataService.getDetail(parseInt(id)).subscribe({\n                next: (resp) => setDetail(resp.data.info), error: (err) => {\n                    console.error('fail to fetch product detail', err);\n                    snackBar.enqueueSnackbar(' 获取新闻详情失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n            ActionService.handleAction('withdraw').pipe(\n                switchMap(() => ArticleDataService.withdraw(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/news');\n                    snackBar.enqueueSnackbar(' 撤稿成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 撤稿失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n\n            ActionService.handleAction('publish').pipe(\n                switchMap(() => ArticleDataService.publish(parseInt(id))),\n            ).subscribe({\n                next: () => {\n                    history.push('/admin/news');\n                    snackBar.enqueueSnackbar(' 发布成功', {\n                        variant: 'success',\n                    });\n                },\n                error: (err) => {\n                    console.error('fail to publish', err);\n                    snackBar.enqueueSnackbar(' 发布失败', {\n                        variant: 'error',\n                    });\n                },\n            }),\n        ] : [];\n\n        return () => {\n            if (actionSubscription.length > 0) {\n                for (const subscription of actionSubscription) {\n                    subscription.unsubscribe();\n                }\n            }\n        };\n    }, [id, snackBar, history]);\n\n    function goBack() {\n        history.goBack();\n    }\n\n    return <Grid container spacing={2} sx={{ pr: 2, pl: 1 }}>\n        <Grid container item xs={12}>\n            <Grid item xs={1} sx={{ pl: 1 }}>\n                <Button variant='outlined' onClick={goBack}>返回</Button>\n            </Grid>\n            <Grid item container justifyContent='flex-end' xs>\n                <ActionMenu status={detail?.status} isCreate={detail?.id === 0} />\n            </Grid>\n        </Grid>\n        <Grid item xs={12}>\n            <EditForm detail={detail} />\n        </Grid>\n    </Grid>;\n};","import React, { useEffect, useState } from 'react';\nimport { DataGrid, GridColDef, GridRenderCellParams, GridRowModel } from '@mui/x-data-grid';\nimport { useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { Box, Fab, IconButton, Typography } from '@mui/material';\n\nimport { ArticleDataService } from '../../services';\nimport { Article, ArticleFilter } from '../../models';\nimport { QuickFilterToolbar } from '../../components/table';\nimport AddIcon from '@mui/icons-material/Add';\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from '../../components/dialog/confirm-delete-dialog';\nimport { tap } from 'rxjs';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { CHANNEL_APP_BAR_TITLE, Portal } from '../../components/portal';\nimport { useSnackbar } from 'notistack';\n\nexport const Others = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: '', limit: 20, offset: 0, category: 0 });\n    const [dataSource, setDataSource] = useState<Article[]>([]);\n    const [totalSize, setTotalSize] = useState<number>(0);\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({ open: false });\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        ArticleDataService.getList(filter).subscribe({\n            next: ({ errcode, data }) => {\n                if (errcode === 0) {\n                    setDataSource(data.list);\n                    setTotalSize(data.total);\n                } else {\n                    console.error('fail to fetch others list', errcode);\n                    snackBar.enqueueSnackbar(' 获取其他列表失败', {\n                        variant: 'error',\n                    });\n                }\n            },\n            error: (err) => {\n                console.error('fail to fetch others list', err);\n                snackBar.enqueueSnackbar(' 获取其他列表失败', {\n                    variant: 'error',\n                });\n            },\n        });\n    }, [filter, snackBar]);\n\n    function confirmDelete(item: GridRowModel) {\n        setDeleteDialog({\n            open: true,\n            message: `确认删除其他信息: \"${item.title}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm(): void {\n                ArticleDataService.delete(item.id)\n                    .pipe(\n                        tap(() => {\n                            setFilter({ ...filter });\n                            setDeleteDialog({ open: false });\n\n                            snackBar.enqueueSnackbar(' 删除其他信息成功', {\n                                variant: 'success',\n                            });\n                        })\n                    )\n                    .subscribe({\n                        error: (err) => {\n                            console.error('fail to fetch others list', err);\n                            snackBar.enqueueSnackbar(' 删除其他信息失败', {\n                                variant: 'error',\n                            });\n                        },\n                    });\n            },\n        });\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: 'id',\n            headerName: '稿件Id',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <Link to={`/admin/others/detail/${params.value}`} color='primary'>\n                        {params.value}\n                    </Link>\n                );\n            },\n        },\n        {\n            field: 'title',\n            headerName: '标题',\n            flex: 1,\n            sortable: false,\n        },\n        {\n            field: 'type_id',\n            headerName: '类型',\n            sortable: false,\n            renderCell: (params) => <Typography>{params.row.type?.name ?? ''}</Typography>,\n        },\n        {\n            field: 'status',\n            headerName: '状态',\n            sortable: false,\n            renderCell: (params) => <Typography>{params.value === 0 ? '草稿' : '已发布'}</Typography>,\n        },\n        {\n            field: 'read_cnt',\n            headerName: '阅读次数',\n            sortable: false,\n        },\n        {\n            field: 'created_at',\n            headerName: '创建时间',\n            flex: 1,\n            sortable: false,\n        },\n        {\n            field: 'category',\n            headerName: '操作',\n            sortable: false,\n            renderCell: (params: GridRenderCellParams) => {\n                return (\n                    <>\n                        <IconButton component={Link} to={`/admin/others/detail/${params.row.id}`}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton onClick={() => confirmDelete(params.row)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                );\n            },\n        },\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    function createItem() {\n        history.push('/admin/others/create');\n    }\n\n    return (\n        <Box sx={{ height: '100%', width: '100%', p: 1 }}>\n            <DataGrid\n                autoHeight\n                disableColumnMenu={true}\n                disableColumnFilter={true}\n                pagination\n                pageSize={filter.limit}\n                page={filter.offset}\n                rowCount={totalSize}\n                rowsPerPageOptions={[10, 20, 50, 100]}\n                onPageChange={pageChange}\n                onPageSizeChange={pageSizeChange}\n                components={{ Toolbar: QuickFilterToolbar }}\n                componentsProps={{\n                    toolbar: {\n                        value: filter.kw,\n                        setFilter,\n                    },\n                }}\n                columns={cols}\n                rows={dataSource}\n            />\n            <Fab\n                sx={{\n                    position: 'fixed',\n                    bottom: 16,\n                    right: 48,\n                }}\n                size='medium'\n                color='primary'\n                aria-label='add'\n                onClick={createItem}>\n                <AddIcon />\n            </Fab>\n            <ConfirmDeleteDialog {...deleteDialog} />\n            <Portal channel={CHANNEL_APP_BAR_TITLE}>其他</Portal>\n        </Box>\n    );\n};\n","import React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n    Box,\n    Button,\n    Grid,\n    IconButton,\n    ImageList,\n    ImageListItem,\n    ImageListItemBar,\n    MenuItem,\n    Paper,\n    TextField,\n    Typography,\n} from '@mui/material';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { Article } from '../../../models';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@xccjh/xccjh-ckeditor5-video-file-upload';\nimport { ActionService, ArticleDataService, FileUploadService } from '../../../services';\nimport { switchMap } from 'rxjs';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\nimport { CKEditorConfig } from '../../../components/editor';\n\nexport const EditForm: React.FC<{ detail: Article }> = ({ detail }) => {\n    const [formDetail, setFormDetail] = useState<Article>(detail);\n    const history = useHistory();\n    const snackBar = useSnackbar();\n\n    useEffect(() => setFormDetail(detail), [detail]);\n\n    useEffect(() => {\n        const saveAction = ActionService.handleAction('save')\n            .pipe(\n                switchMap(() => {\n                    return !formDetail.id\n                        ? ArticleDataService.create({\n                              category: 0,\n                              content: formDetail.content,\n                              summary: formDetail.summary,\n                              title: formDetail.title,\n                              type_id: formDetail.type_id,\n                              covers: formDetail.covers.map((x) => x.img),\n                          })\n                        : ArticleDataService.edit({\n                              content: formDetail.content,\n                              id: formDetail.id,\n                              summary: formDetail.summary,\n                              title: formDetail.title,\n                              type_id: formDetail.type_id,\n                              covers: formDetail.covers.map((x) => x.img),\n                          });\n                })\n            )\n            .subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        history.push('/admin/others');\n                        snackBar.enqueueSnackbar('保存其他信息成功', {\n                            variant: 'success',\n                        });\n                    } else {\n                        console.error('fail to save others', resp.errmessage);\n                        snackBar.enqueueSnackbar(' 保存其他信息失败', {\n                            variant: 'error',\n                        });\n                    }\n                },\n                error: (err) => {\n                    console.error('fail to save others', err);\n                    snackBar.enqueueSnackbar(' 保存其他信息失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n\n        return () => {\n            saveAction.unsubscribe();\n        };\n    }, [formDetail, snackBar, history]);\n\n    function updateInputValue(key: string): (e: ChangeEvent<HTMLInputElement>) => void {\n        return (e) => {\n            const value = e.target.value;\n            setFormDetail((state) => ({\n                ...state,\n                [key]: value,\n            }));\n        };\n    }\n\n    function handleCoverUpload(e) {\n        const files = e.target.files;\n        if (files && files.length > 0) {\n            const formData = new FormData();\n            formData.append('file', files[0]);\n\n            FileUploadService.postImage(formData).subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        setFormDetail((state) => {\n                            const covers = state.covers ?? [];\n                            covers.push({\n                                id: -Math.ceil(Math.random() * 1000),\n                                article_id: formDetail.id,\n                                img: resp.data.url,\n                            });\n\n                            return {\n                                ...state,\n                                covers,\n                            };\n                        });\n                    } else {\n                        console.error('fail to upload cover', resp.errmessage);\n                        snackBar.enqueueSnackbar(' 上传封面失败', {\n                            variant: 'error',\n                        });\n                    }\n                },\n                error: (err) => {\n                    console.error('fail to upload cover', err);\n                    snackBar.enqueueSnackbar(' 上传封面失败', {\n                        variant: 'error',\n                    });\n                },\n            });\n        }\n    }\n\n    function handleDeleteCover(coverIndex): void {\n        setFormDetail((state) => {\n            const covers = state.covers ?? [];\n            covers.splice(coverIndex, 1);\n\n            return {\n                ...state,\n                covers,\n            };\n        });\n    }\n\n    function handleContentUpdate(event, editor): void {\n        const rawContent = editor.getData();\n\n        setFormDetail((state) => ({\n            ...state,\n            content: rawContent,\n        }));\n        console.log('editor update >>>', rawContent);\n    }\n\n    function clearSelectedFile(e) {\n        e.target.value = null;\n    }\n\n    return (\n        <Box sx={{ '& .MuiTextField-root': { mt: 1, mb: 1 } }} component='form'>\n            <Grid container>\n                <Grid item xs={12}>\n                    <TextField\n                        select\n                        sx={{ minWidth: '200px', mr: 1 }}\n                        id='other-category-root'\n                        label='类型'\n                        value={'0'}\n                        SelectProps={{\n                            readOnly: true,\n                        }}>\n                        <MenuItem key='0' value='0'>\n                            其他\n                        </MenuItem>\n                    </TextField>\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField fullWidth label='标题' value={formDetail.title} onChange={updateInputValue('title')} />\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField\n                        fullWidth\n                        label='摘要'\n                        rows='4'\n                        value={formDetail.summary}\n                        onChange={updateInputValue('summary')}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                        <Grid container>\n                            <Grid item xs={1}>\n                                <Typography variant='subtitle1'>封面</Typography>\n                            </Grid>\n                            <Grid item container xs justifyContent='flex-end'>\n                                <label htmlFor='upload-cover'>\n                                    <input\n                                        style={{ display: 'none' }}\n                                        accept='image/*'\n                                        id='upload-cover'\n                                        type='file'\n                                        onChange={handleCoverUpload}\n                                        onClick={clearSelectedFile}\n                                    />\n                                    <Button variant='contained' component='span'>\n                                        添加封面\n                                    </Button>\n                                </label>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <ImageList sx={{ minHeight: '160px', width: '100%' }} cols={5} rowHeight={164}>\n                                    {formDetail.covers?.map((item, index) => (\n                                        <ImageListItem key={item.id}>\n                                            <img src={`${item.img}`} alt={''} />\n                                            <ImageListItemBar\n                                                position='top'\n                                                actionPosition='right'\n                                                actionIcon={\n                                                    <IconButton\n                                                        onClick={() => handleDeleteCover(index)}\n                                                        sx={{ color: 'red' }}>\n                                                        <CancelIcon />\n                                                    </IconButton>\n                                                }\n                                            />\n                                        </ImageListItem>\n                                    )) ?? <div />}\n                                </ImageList>\n                            </Grid>\n                        </Grid>\n                    </Paper>\n                </Grid>\n                <Grid item container xs={12}>\n                    <Paper sx={{ mt: 1, p: 1, width: '100%' }} variant='outlined'>\n                        <Grid container>\n                            <Grid item xs={1}>\n                                <Typography variant='subtitle1'>内容</Typography>\n                            </Grid>\n                            <Grid\n                                item\n                                sx={{\n                                    height: '420px',\n                                    '& .ck-editor__main, & .ck-content': { height: '380px' },\n                                }}\n                                xs={12}>\n                                <CKEditor\n                                    config={CKEditorConfig}\n                                    editor={ClassicEditor}\n                                    data={formDetail.content}\n                                    onChange={handleContentUpdate}\n                                />\n                            </Grid>\n                        </Grid>\n                    </Paper>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n};\n","import React, { useEffect, useState } from 'react';\nimport { Article } from '../../../models';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { ActionService, ArticleDataService } from '../../../services';\nimport { Button, Grid } from '@mui/material';\n\nimport { EditForm } from '../components/edit-form';\nimport { ActionMenu } from '../../../components/form/action-menu';\nimport { useSnackbar } from 'notistack';\nimport { switchMap } from 'rxjs';\n\nexport const OtherDetail: React.FC = (props) => {\n    const [detail, setDetail] = useState<Article>({\n        id: 0,\n        category: 0,\n        content: '',\n        covers: [],\n        read_cnt: 0,\n        status: 0,\n        summary: '',\n        title: '',\n        type_id: 0,\n        created_at: '',\n        updated_at: '',\n    });\n\n    const snackBar = useSnackbar();\n    const history = useHistory();\n    const { params } = useRouteMatch<{ id: string }>();\n    const { id } = params;\n\n    useEffect(() => {\n        let actionSubscription = id\n            ? [\n                  ArticleDataService.getDetail(parseInt(id)).subscribe({\n                      next: (resp) => setDetail(resp.data.info),\n                      error: (err) => {\n                          console.error('fail to fetch others detail', err);\n                          snackBar.enqueueSnackbar(' 获取其他详细信息失败', {\n                              variant: 'error',\n                          });\n                      },\n                  }),\n                  ActionService.handleAction('withdraw')\n                      .pipe(switchMap(() => ArticleDataService.withdraw(parseInt(id))))\n                      .subscribe({\n                          next: () => {\n                              history.push('/admin/others');\n                              snackBar.enqueueSnackbar(' 撤稿成功', {\n                                  variant: 'success',\n                              });\n                          },\n                          error: (err) => {\n                              console.error('fail to publish', err);\n                              snackBar.enqueueSnackbar(' 撤稿失败', {\n                                  variant: 'error',\n                              });\n                          },\n                      }),\n\n                  ActionService.handleAction('publish')\n                      .pipe(switchMap(() => ArticleDataService.publish(parseInt(id))))\n                      .subscribe({\n                          next: () => {\n                              history.push('/admin/others');\n                              snackBar.enqueueSnackbar(' 发布成功', {\n                                  variant: 'success',\n                              });\n                          },\n                          error: (err) => {\n                              console.error('fail to publish', err);\n                              snackBar.enqueueSnackbar(' 发布失败', {\n                                  variant: 'error',\n                              });\n                          },\n                      }),\n              ]\n            : [];\n\n        return () => {\n            if (actionSubscription.length > 0) {\n                for (const subscription of actionSubscription) {\n                    subscription.unsubscribe();\n                }\n            }\n        };\n    }, [id, snackBar, history]);\n\n    function goBack() {\n        history.goBack();\n    }\n\n    return (\n        <Grid container spacing={2} sx={{ pr: 2, pl: 1 }}>\n            <Grid container item xs={12}>\n                <Grid item xs={1} sx={{ pl: 1 }}>\n                    <Button variant='outlined' onClick={goBack}>\n                        返回\n                    </Button>\n                </Grid>\n                <Grid item container justifyContent='flex-end' xs>\n                    <ActionMenu status={detail?.status} isCreate={detail?.id === 0} />\n                </Grid>\n            </Grid>\n            <Grid item xs={12}>\n                <EditForm detail={detail} />\n            </Grid>\n        </Grid>\n    );\n};\n","import { Grid, IconButton, MenuItem, TextField } from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport React from 'react';\n\nexport const categoryList = {\n    1: '产品类型',\n    2: '应用类型',\n    3: '新闻类型',\n};\n\nexport const FilterToolbar: React.FC<{ filter, setFilter }> = ({ filter, setFilter }) => {\n    function handleFilterTypeChange(e) {\n        setFilter({\n            limit: filter.limit,\n            offset: 0,\n            category: e.target.value,\n            kw: '',\n        });\n    }\n\n    function handleKWChange(e) {\n        setFilter((state) => ({\n            ...state,\n            offset: 0,\n            kw: e.target?.value ?? '',\n        }));\n    }\n\n    return <Grid container spacing={1} sx={{ m: 1 }}>\n        <Grid item xs={2}>\n            <TextField\n                select\n                fullWidth\n                id='category-filter'\n                label='类型'\n                value={filter.category}\n                onChange={handleFilterTypeChange}\n            >\n                {\n                    Object.entries(categoryList).map(([key, value]) => {\n                        return <MenuItem key={`category-${key}`} value={parseInt(key)}>\n                            {value}\n                        </MenuItem>;\n                    })\n                }\n            </TextField>\n        </Grid>\n        <Grid item xs={3} sx={{ display: 'flex', alignItems: 'center' }}>\n            <TextField\n                variant='standard'\n                value={filter.kw}\n                onChange={handleKWChange}\n                placeholder='关键字查找'\n                InputProps={{\n                    startAdornment: <SearchIcon fontSize='small' />,\n                    endAdornment: (\n                        <IconButton\n                            title='Clear'\n                            aria-label='Clear'\n                            size='small'\n                            style={{ visibility: filter.kw ? 'visible' : 'hidden' }}\n                            onClick={handleKWChange}\n                        >\n                            <ClearIcon fontSize='small' />\n                        </IconButton>\n                    ),\n                }}\n            />\n        </Grid>\n    </Grid>;\n};\n","import React, { useEffect, useState } from \"react\";\nimport { ArticleType } from \"../../../models\";\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, MenuItem, TextField } from \"@mui/material\";\n\nexport interface CategoryDetailDialogProps {\n    category: number;\n    title: string;\n    typeList: ArticleType[];\n    open: boolean;\n    typeDetail?: ArticleType;\n    onSave?: (form: ArticleType) => void;\n    onClose?: () => void;\n}\n\nexport const CategoryDetailDialog: React.FC<CategoryDetailDialogProps> = ({\n                                                                              category,\n                                                                              title,\n                                                                              open,\n                                                                              typeList,\n                                                                              onSave,\n                                                                              onClose,\n                                                                              typeDetail\n                                                                          }) => {\n    const [formDetail, setFormDetail] = useState<ArticleType>(typeDetail);\n    useEffect(() => {\n        setFormDetail(typeDetail);\n    }, [typeDetail]);\n\n    function handleClose() {\n        onClose && onClose();\n    }\n\n    function handleSubmit() {\n        onSave && onSave(formDetail);\n    }\n\n    function handleNameChange(e) {\n        setFormDetail((state) => ({\n            ...state,\n            name: e.target.value\n        }));\n    }\n\n    function handleParentIdChange(e) {\n        setFormDetail((state) => ({\n            ...state,\n            parent_id: e.target.value\n        }));\n    }\n\n    return (\n      <Dialog open={open}>\n          <DialogTitle>{title}</DialogTitle>\n          {open &&\n          <DialogContent>\n            <TextField\n              autoFocus\n              required\n              margin=\"dense\"\n              id=\"name\"\n              label=\"名称\"\n              type=\"text\"\n              value={formDetail?.name ?? \"\"}\n              fullWidth\n              onChange={handleNameChange}\n            />\n              {category === 1 && (\n                <TextField\n                  select\n                  autoFocus\n                  margin=\"dense\"\n                  id=\"parent_id\"\n                  label=\"父级类型\"\n                  type=\"text\"\n                  value={formDetail?.parent_id ?? \"\"}\n                  fullWidth\n                  onChange={handleParentIdChange}\n                  SelectProps={{\n                      readOnly: formDetail?.id >= 0\n                  }}>\n                    <MenuItem key=\"empty\" value={\"\"}>\n                        无\n                    </MenuItem>\n                    {typeList.map((x) => {\n                        return (\n                          <MenuItem key={x.id} value={x.id}>\n                              {x.name}\n                          </MenuItem>\n                        );\n                    })}\n                </TextField>\n              )}\n          </DialogContent>\n          }\n          <DialogActions>\n              <Button onClick={handleClose}>取消</Button>\n              <Button variant=\"contained\" onClick={handleSubmit}>\n                  保存\n              </Button>\n          </DialogActions>\n      </Dialog>\n    );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { DataGrid, GridColDef, GridRenderEditCellParams } from \"@mui/x-data-grid\";\n\nimport { ArticleTypeDataService } from \"../../services\";\nimport { ArticleFilter, ArticleType } from \"../../models\";\nimport { Box, Fab, IconButton } from \"@mui/material\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport EditIcon from \"@mui/icons-material/Edit\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport { categoryList, FilterToolbar } from \"./components/filter-toolbar\";\nimport { CategoryDetailDialog, CategoryDetailDialogProps } from \"./components/category-detail-dialog\";\nimport { ConfirmDeleteDialog, ConfirmDeleteDialogProps } from \"../../components/dialog/confirm-delete-dialog\";\nimport { tap } from \"rxjs\";\nimport { CHANNEL_APP_BAR_TITLE, Portal } from \"../../components/portal\";\nimport { useSnackbar } from \"notistack\";\n\nexport const Settings = () => {\n    const [filter, setFilter] = useState<ArticleFilter>({ kw: \"\", limit: 20, offset: 0, category: 1 });\n    const [dataSource, setDataSource] = useState<ArticleType[]>([]);\n    const [detailDialog, setDetailDialog] = useState<CategoryDetailDialogProps>({\n        open: false,\n        category: -1,\n        typeList: [],\n        title: \"\"\n    });\n    const [deleteDialog, setDeleteDialog] = useState<ConfirmDeleteDialogProps>({\n        open: false\n    });\n    const [fetchFlag, setFetchFlag] = useState(new Date().valueOf());\n    const snackBar = useSnackbar();\n\n    useEffect(() => {\n        const typeListSubscription = ArticleTypeDataService.getList(filter.category).subscribe(({ errcode, data }) => {\n            if (errcode === 0) {\n                setDataSource(data.list);\n            } else {\n                snackBar.enqueueSnackbar(\"获取类型列表失败\", {\n                    variant: \"error\"\n                });\n            }\n        });\n\n        return () => {\n            typeListSubscription.unsubscribe();\n        };\n    }, [filter.category, snackBar, fetchFlag]);\n\n    function deleteItem(item: ArticleType) {\n        setDeleteDialog({\n            open: true,\n            message: `确认删除\"${item.name}\"?`,\n            onClose(): void {\n                setDeleteDialog({ open: false });\n            },\n            onConfirm(): void {\n                ArticleTypeDataService.delete(item.id)\n                  .pipe(\n                    tap(() => {\n                        setDeleteDialog({ open: false });\n                        setFetchFlag(new Date().valueOf());\n                    })\n                  )\n                  .subscribe();\n            }\n        });\n    }\n\n    const cols: GridColDef[] = [\n        {\n            field: \"id\",\n            headerName: \"类型Id\",\n            sortable: false\n        },\n        {\n            field: \"name\",\n            headerName: \"名称\",\n            flex: 1,\n            sortable: false\n        },\n        {\n            field: \"parent_id\",\n            headerName: \"父类型id\",\n            sortable: false\n        },\n        {\n            field: \"category\",\n            headerName: \"操作\",\n            flex: 1,\n            sortable: false,\n            renderCell: (params: GridRenderEditCellParams) => {\n                return (\n                  <>\n                      <IconButton onClick={() => editItemDialog(params.row)}>\n                          <EditIcon />\n                      </IconButton>\n                      <IconButton onClick={() => deleteItem(params.row)}>\n                          <DeleteIcon />\n                      </IconButton>\n                  </>\n                );\n            }\n        }\n    ];\n\n    function pageChange(pageNumber: number): void {\n        setFilter((filter) => ({ ...filter, offset: pageNumber }));\n    }\n\n    function pageSizeChange(pageSize: number): void {\n        setFilter((filter) => ({ ...filter, limit: pageSize, offset: 0 }));\n    }\n\n    const filterData = () => {\n        let result = dataSource;\n        if (filter.kw) {\n            result = dataSource.filter((x) => x.name.includes(filter.kw));\n        }\n\n        const step = filter.offset * filter.limit;\n        return result.filter((x, i) => i >= step && i < step + filter.limit);\n    };\n\n    function closeDetailDialog() {\n        setDetailDialog((state) => ({\n            ...state,\n            onSave: null,\n            onClose: null,\n            open: false\n        }));\n    }\n\n    const saveObserver = {\n        next: (resp) => {\n            if (resp.errcode === 0) {\n                setDetailDialog(null);\n                setFetchFlag(new Date().valueOf());\n            } else {\n                console.error(\"保存类型失败\", resp.errmessage);\n                snackBar.enqueueSnackbar(\"保存失败\", {\n                    variant: \"error\"\n                });\n            }\n        },\n        error: (error) => {\n            console.error(\"保存类型失败\", error);\n            snackBar.enqueueSnackbar(\"保存失败\", {\n                variant: \"error\"\n            });\n        }\n    };\n\n    function createItem(newForm: ArticleType) {\n        ArticleTypeDataService.creat({\n            category: newForm.category,\n            name: newForm.name,\n            parent_id: newForm.parent_id\n        }).subscribe(saveObserver);\n    }\n\n    function saveItem(newForm: ArticleType) {\n        ArticleTypeDataService.edit({\n            id: newForm.id,\n            name: newForm.name\n        }).subscribe(saveObserver);\n    }\n\n    function editItemDialog(item: ArticleType) {\n        setDetailDialog({\n            open: true,\n            title: `编辑${categoryList[filter.category]}`,\n            category: filter.category,\n            typeList: dataSource,\n            onClose: closeDetailDialog,\n            onSave: saveItem,\n            typeDetail: item\n        });\n    }\n\n    function newItemDialog() {\n        setDetailDialog({\n            open: true,\n            title: `新增${categoryList[filter.category]}`,\n            category: filter.category,\n            typeList: dataSource,\n            onClose: closeDetailDialog,\n            onSave: createItem,\n            typeDetail: {\n                id: -1,\n                name: \"\",\n                parent_id: null,\n                category: filter.category\n            }\n        });\n    }\n\n    return (\n      <Box sx={{ height: \"100%\", width: \"100%\", p: 1 }}>\n          <DataGrid\n            autoHeight\n            disableColumnMenu={true}\n            disableColumnFilter={true}\n            pagination\n            pageSize={filter.limit}\n            page={filter.offset}\n            rowCount={filterData().length}\n            paginationMode=\"server\"\n            rowsPerPageOptions={[10, 20, 50, 100]}\n            onPageChange={pageChange}\n            onPageSizeChange={pageSizeChange}\n            components={{ Toolbar: FilterToolbar }}\n            componentsProps={{\n                toolbar: {\n                    filter,\n                    setFilter\n                }\n            }}\n            columns={cols}\n            rows={filterData()}\n          />\n          <Fab\n            sx={{\n                position: \"fixed\",\n                bottom: 16,\n                right: 48\n            }}\n            size=\"medium\"\n            color=\"primary\"\n            aria-label=\"add\"\n            onClick={newItemDialog}>\n              <AddIcon />\n          </Fab>\n          <CategoryDetailDialog {...detailDialog} />\n          <ConfirmDeleteDialog {...deleteDialog} />\n\n          <Portal channel={CHANNEL_APP_BAR_TITLE}>类型设置</Portal>\n      </Box>\n    );\n};\n","import React, { useMemo, useState } from 'react';\nimport { Avatar, Box, Button, Container, TextField, Typography } from '@mui/material';\n\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport { LoginService } from '../../services';\nimport { useHistory } from 'react-router';\nimport { useSnackbar } from 'notistack';\n\nexport const Login = () => {\n    const [codeState, setCodeState] = useState(new Date().valueOf());\n    const [loginForm, setLoginForm] = useState({\n        email: '',\n        password: '',\n        code: '',\n    });\n    const [errorForm, setErrorForm] = useState({\n        email: false,\n        password: false,\n        code: false,\n        summary: '',\n    });\n    const history = useHistory();\n    const snakeBar = useSnackbar();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        if (loginForm.email && loginForm.password && loginForm.code) {\n            setErrorForm({\n                email: false,\n                code: false,\n                password: false,\n                summary: '',\n            });\n            LoginService.signIn(loginForm).subscribe({\n                next: (resp) => {\n                    if (resp.errcode === 0) {\n                        history.push('/');\n                        window.location.reload();\n                    } else {\n                        setErrorForm({\n                            ...errorForm,\n                            summary: resp.errmessage,\n                        });\n                        setCodeState(new Date().valueOf())\n                    }\n                },\n                error: (err) => {\n                    snakeBar.enqueueSnackbar('登录失败', {\n                        variant: 'error',\n                    });\n                    setCodeState(new Date().valueOf())\n                },\n            });\n        } else {\n            const newState = {\n                email: !loginForm.email,\n                password: !loginForm.password,\n                code: !loginForm.code,\n            };\n            setErrorForm({ ...errorForm, ...newState });\n        }\n    }\n\n    function updatedFormValue(key) {\n        return (e) => {\n            setErrorForm({\n                ...errorForm,\n                [key]: !e.target?.value,\n            });\n\n            setLoginForm((state) => ({\n                ...state,\n                [key]: e.target.value,\n            }));\n        };\n    }\n\n    function refreshCode(): void {\n        setCodeState(new Date().valueOf());\n    }\n\n    const codeUrl = useMemo(() => {\n        return `/verify/code?state=${codeState}`;\n    }, [codeState]);\n\n    return (\n        <Container maxWidth='xs'>\n            <Box\n                sx={{\n                    marginTop: 8,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                }}>\n                <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\n                    <LockOutlinedIcon />\n                </Avatar>\n                <Typography component='h1' variant='h5'>\n                    登录\n                </Typography>\n                <Box component='form' onSubmit={handleSubmit} noValidate sx={{ mt: 1 }}>\n                    <TextField\n                        margin='normal'\n                        required\n                        fullWidth\n                        id='email'\n                        label='电子邮箱'\n                        name='email'\n                        autoComplete='email'\n                        autoFocus\n                        value={loginForm.email}\n                        onChange={updatedFormValue('email')}\n                        error={errorForm.email}\n                        helperText={errorForm.email && '请输入电子邮箱'}\n                    />\n                    <TextField\n                        margin='normal'\n                        required\n                        fullWidth\n                        name='password'\n                        label='密码'\n                        type='password'\n                        id='password'\n                        autoComplete='current-password'\n                        value={loginForm.password}\n                        onChange={updatedFormValue('password')}\n                        error={errorForm.password}\n                        helperText={errorForm.password && '请输入密码'}\n                    />\n                    <TextField\n                        margin='normal'\n                        required\n                        fullWidth\n                        name='code'\n                        label='验证码'\n                        id='code'\n                        value={loginForm.code}\n                        onChange={updatedFormValue('code')}\n                        InputProps={{\n                            endAdornment: <img src={codeUrl} onClick={refreshCode} alt='验证码' />,\n                        }}\n                        error={errorForm.code}\n                        helperText={errorForm.code && '请输入验证码'}\n                    />\n                    {errorForm.summary && (\n                        <Typography variant='overline' color={'red'}>\n                            {errorForm.summary}\n                        </Typography>\n                    )}\n                    <Button type='submit' fullWidth variant='contained' sx={{ mt: 3, mb: 2 }}>\n                        登录\n                    </Button>\n                </Box>\n            </Box>\n        </Container>\n    );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Box } from \"@mui/material\";\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport { AuthLayout, PublicLayout } from \"../layout\";\nimport { Products } from \"../pages/products\";\nimport { ProductDetail } from \"../pages/products/detail\";\nimport { Applications } from \"../pages/applications\";\nimport { ApplicationDetail } from \"../pages/applications/detail\";\nimport { News } from \"../pages/news\";\nimport { NewsDetail } from \"../pages/news/detail\";\nimport { Others } from \"../pages/others\";\nimport { OtherDetail } from \"../pages/others/detail\";\nimport { Settings } from \"../pages/settings\";\nimport { Login } from \"../pages/login\";\nimport { useHistory } from \"react-router\";\nimport { UserService } from \"../services\";\n\nexport const RouterConfig = () => {\n    const history = useHistory();\n    const [auth, setAuth] = useState(null);\n\n    useEffect(() => {\n        const useInfoSubscription = UserService.getUserInfo().subscribe({\n            next: (resp) => {\n                if (resp.errcode === 401) {\n                    history.push(\"/admin/login\");\n                    setAuth(false);\n                } else {\n                    setAuth(true);\n                }\n            },\n            error: (error) => {\n                console.error(\"fail to get user info\", error);\n                history.push(\"/admin/login\");\n                setAuth(false);\n            }\n        });\n\n        return () => {\n            useInfoSubscription.unsubscribe();\n        };\n    }, [history, auth]);\n\n    return (\n      <Box sx={{\n          height: '100vh',\n          overflowY: 'auto',\n      }}>\n          <Switch>\n              <Route path={\"/admin/login\"} exact={true}>\n                  <PublicLayout>\n                      <Login />\n                  </PublicLayout>\n              </Route>\n          </Switch>\n          {\n              auth &&\n              <AuthLayout>\n                <Switch>\n                  <Route path={\"/\"} exact={true}>\n                    <Redirect to={\"/admin/products\"} />\n                  </Route>\n                  <Route path={\"/admin/settings\"} exact={true}>\n                    <Settings />\n                  </Route>\n                  <Route path={\"/admin/products\"} exact={true}>\n                    <Products />\n                  </Route>\n                  <Route path={\"/admin/products/create\"} exact={true}>\n                    <ProductDetail />\n                  </Route>\n                  <Route path={\"/admin/products/detail/:id\"} exact={true}>\n                    <ProductDetail />\n                  </Route>\n                  <Route path={\"/admin/applications\"} exact={true}>\n                    <Applications />\n                  </Route>\n                  <Route path={\"/admin/applications/create\"} exact={true}>\n                    <ApplicationDetail />\n                  </Route>\n                  <Route path={\"/admin/applications/detail/:id\"} exact={true}>\n                    <ApplicationDetail />\n                  </Route>\n                  <Route path={\"/admin/news\"} exact={true}>\n                    <News />\n                  </Route>\n                  <Route path={\"/admin/news/create\"} exact={true}>\n                    <NewsDetail />\n                  </Route>\n                  <Route path={\"/admin/news/detail/:id\"} exact={true}>\n                    <NewsDetail />\n                  </Route>\n                  <Route path={\"/admin/others\"} exact={true}>\n                    <Others />\n                  </Route>\n                  <Route path={\"/admin/others/create\"} exact={true}>\n                    <OtherDetail />\n                  </Route>\n                  <Route path={\"/admin/others/detail/:id\"} exact={true}>\n                    <OtherDetail />\n                  </Route>\n                </Switch>\n              </AuthLayout>\n          }\n      </Box>\n    );\n};\n","import React from 'react';\nimport { CssBaseline, ThemeProvider } from '@mui/material';\nimport theme from './theme';\nimport { RouterConfig } from './route';\nimport { SnackbarProvider } from 'notistack';\n\nexport const App = (props) => {\n    return (\n        <ThemeProvider theme={theme}>\n            <CssBaseline />\n            <SnackbarProvider\n                maxSnack={3}\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                }}>\n                <RouterConfig />\n            </SnackbarProvider>\n        </ThemeProvider>\n    );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { App } from \"./App\";\nimport { loadCSRFToken } from \"./utils\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nif (process.env.NODE_ENV !== \"production\") {\n  // const worker = require('./mocks').default\n  // worker.start()\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n  reportWebVitals();\n}\n\n/**\n * Next we will register the CSRF Token as a common header with Axios so that\n * all outgoing HTTP requests automatically have it attached. This is just\n * a simple convenience so we don't have to attach every token manually.\n */\nlet token: HTMLInputElement = document.body.querySelector(\"input[name=\\\"_token\\\"]\");\n\nif (token) {\n  loadCSRFToken(token.value);\n} else {\n  console.error(\"CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token\");\n}\n"],"sourceRoot":""}